import{r as i,n as V,c as S,w as c,_ as E,x as p,o as n,a as m,b as t,d as l,u as y,a7 as L,E as M,D as N,p as h,t as r,K as B,L as F,F as f,R as I,I as u,M as v,O as b,j as P}from"./index-c5ab3c5b.js";import{_ as $}from"./Modal-a3d4ca85.js";const j={class:"max-w-7xl mx-auto p-6 space-y-8"},H={class:"bg-gradient-to-r from-orange-50 to-yellow-50 rounded-2xl p-6 shadow-sm"},R={class:"flex justify-between items-center"},U={class:"flex items-center space-x-3"},O={class:"w-8 h-8 text-orange-600",viewBox:"0 0 24 24"},T=["d"],z=t("h1",{class:"text-2xl font-bold text-gray-800"},"상담 기록",-1),G={class:"w-5 h-5 mr-2",viewBox:"0 0 24 24"},K=["d"],A={class:"space-y-4"},Z={class:"p-6 border-b border-gray-100"},q={class:"flex justify-between items-start"},J={class:"space-y-1"},Q={class:"flex items-center space-x-3"},W={class:"text-lg font-semibold text-gray-800"},X={class:"inline-flex items-center px-3 py-1 bg-blue-100 text-blue-800 text-xs rounded-full"},Y={class:"text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full"},tt={class:"p-6 space-y-4"},et={class:"text-gray-600 text-sm leading-relaxed"},st={key:0,class:"bg-gray-50 rounded-lg p-4 border border-gray-100"},ot={class:"text-gray-600 text-sm leading-relaxed"},at=t("div",{class:"flex items-center space-x-2"},[t("svg",{class:"w-6 h-6 text-orange-600",viewBox:"0 0 24 24"},[t("path",{fill:"currentColor",d:"M20 2H4C2.9 2 2 2.9 2 4V22L6 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2M20 16H5.2L4 17.2V4H20V16Z"})]),t("span",null,"상담 추가")],-1),nt=["onSubmit"],lt={class:"space-y-2"},rt=t("label",{class:"block text-sm font-medium text-gray-700"},"학생",-1),dt=t("option",{value:""},"학생을 선택하세요",-1),it=["value"],ct={class:"space-y-2"},ut=t("label",{class:"block text-sm font-medium text-gray-700"},"상담 유형",-1),pt=t("option",{value:""},"상담 유형을 선택하세요",-1),_t=t("option",null,"수업문의",-1),gt=t("option",null,"보강문의",-1),xt=t("option",null,"일정변경",-1),mt=t("option",null,"기타문의",-1),yt=[pt,_t,gt,xt,mt],ht={class:"space-y-2"},ft=t("label",{class:"block text-sm font-medium text-gray-700"},"내용",-1),vt={class:"space-y-2"},bt=t("label",{class:"block text-sm font-medium text-gray-700"},"상담 일시",-1),wt={class:"flex justify-end space-x-3 pt-4"},Ct=t("button",{type:"submit",class:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors duration-150"}," 저장 ",-1),St={__name:"Consultations",setup(kt){const d=i(!1),_=i([]),g=i([]),a=i({studentId:"",type:"",content:"",consultationDate:""}),w=o=>({PENDING:"bg-yellow-100 text-yellow-800",IN_PROGRESS:"bg-blue-100 text-blue-800",COMPLETED:"bg-green-100 text-green-800",CANCELLED:"bg-red-100 text-red-800"})[o]||"bg-gray-100 text-gray-800",C=o=>new Date(o).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),k=async()=>{try{await p.post("/api/consultations",a.value),d.value=!1,x()}catch(o){console.error("Failed to create consultation:",o)}},x=async()=>{try{const o=await p.get("/api/consultations");g.value=o.data}catch(o){console.error("Failed to load consultations:",o)}},D=async()=>{try{const o=await p.get("/api/students");_.value=o.data}catch(o){console.error("Failed to load students:",o)}};return V(async()=>{await Promise.all([D(),x()])}),(o,s)=>(n(),S(E,null,{default:c(()=>[m(P,null,{default:c(()=>[t("div",j,[t("div",H,[t("div",R,[t("div",U,[(n(),l("svg",O,[t("path",{fill:"currentColor",d:y(L)},null,8,T)])),z]),t("button",{onClick:s[0]||(s[0]=e=>d.value=!0),class:"inline-flex items-center px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors duration-150 shadow-sm"},[(n(),l("svg",G,[t("path",{fill:"currentColor",d:y(M)},null,8,K)])),N(" 상담 추가 ")])])]),t("div",A,[(n(!0),l(f,null,h(g.value,e=>(n(),l("div",{key:e.id,class:"bg-white rounded-xl shadow-sm overflow-hidden hover:shadow-md transition-shadow duration-200"},[t("div",Z,[t("div",q,[t("div",J,[t("div",Q,[t("h3",W,r(e.student.name),1),t("span",{class:B(["px-3 py-1 text-xs rounded-full font-medium",w(e.status)])},r(e.status),3)]),t("span",X,r(e.type),1)]),t("span",Y,r(C(e.consultationDate)),1)])]),t("div",tt,[t("div",null,[t("p",et,r(e.content),1)]),e.responseContent?(n(),l("div",st,[t("p",ot,r(e.responseContent),1)])):F("",!0)])]))),128))]),m($,{show:d.value,onClose:s[6]||(s[6]=e=>d.value=!1)},{title:c(()=>[at]),content:c(()=>[t("form",{onSubmit:I(k,["prevent"]),class:"space-y-6"},[t("div",lt,[rt,u(t("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>a.value.studentId=e),class:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors"},[dt,(n(!0),l(f,null,h(_.value,e=>(n(),l("option",{key:e.id,value:e.id},r(e.name),9,it))),128))],512),[[v,a.value.studentId]])]),t("div",ct,[ut,u(t("select",{"onUpdate:modelValue":s[2]||(s[2]=e=>a.value.type=e),class:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors"},yt,512),[[v,a.value.type]])]),t("div",ht,[ft,u(t("textarea",{"onUpdate:modelValue":s[3]||(s[3]=e=>a.value.content=e),rows:"4",class:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors resize-none",placeholder:"상담 내용을 입력하세요"},null,512),[[b,a.value.content]])]),t("div",vt,[bt,u(t("input",{type:"datetime-local","onUpdate:modelValue":s[4]||(s[4]=e=>a.value.consultationDate=e),class:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors"},null,512),[[b,a.value.consultationDate]])]),t("div",wt,[t("button",{type:"button",onClick:s[5]||(s[5]=e=>d.value=!1),class:"px-4 py-2 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors duration-150"}," 취소 "),Ct])],40,nt)]),_:1},8,["show"])])]),_:1})]),_:1}))}};export{St as default};
