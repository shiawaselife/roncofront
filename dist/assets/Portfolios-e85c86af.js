import{r as d,k as F,o as r,c as P,w as u,a as g,b as t,d as n,u as p,aU as y,C as b,n as h,t as a,aV as M,aW as T,J as H,F as w,Q as L,E as c,K as _,G as k,_ as U,L as $,s as f}from"./index-5d7e744c.js";import{_ as A}from"./Modal-383eba00.js";const I={class:"max-w-7xl mx-auto p-6 space-y-8"},S={class:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl p-6 shadow-sm"},N={class:"flex justify-between items-center"},E={class:"w-5 h-5 mr-2",viewBox:"0 0 24 24"},O=["d"],K={class:"grid gap-6 md:grid-cols-2 lg:grid-cols-3"},Z={class:"p-6 border-b border-gray-100"},z={class:"flex justify-between"},G={class:"text-lg font-semibold text-gray-800"},J={class:"text-sm text-gray-600 mt-1"},Q={class:"flex items-start space-x-3"},R={class:"text-sm text-gray-500"},W=["onClick"],X={class:"w-5 h-5",viewBox:"0 0 24 24"},q=["d"],Y={class:"p-6"},tt={class:"text-gray-600 text-sm leading-relaxed"},et={class:"mt-4 flex items-center justify-between"},st={class:"px-3 py-1 bg-purple-100 text-purple-800 text-xs rounded-full font-medium"},ot=["href"],lt={class:"w-4 h-4 mr-1",viewBox:"0 0 24 24"},rt=["d"],nt={class:"flex items-center space-x-2"},at={class:"w-6 h-6 text-purple-600",viewBox:"0 0 24 24"},it=["d"],dt={class:"space-y-2"},ut=["value"],pt={class:"space-y-2"},ct={class:"space-y-2"},ft={class:"space-y-2"},mt={class:"space-y-2"},xt={class:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg"},vt={class:"space-y-1 text-center"},gt={class:"flex text-sm text-gray-600"},yt={class:"relative cursor-pointer bg-white rounded-md font-medium text-purple-600 hover:text-purple-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-purple-500"},bt={class:"flex justify-end space-x-3 pt-4"},Ct={__name:"Portfolios",setup(ht){const i=d(!1),x=d([]),v=d([]),l=d({studentId:"",title:"",projectType:"",description:"",file:null}),C=o=>new Date(o).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"}),D=o=>{l.value.file=o.target.files[0]},V=async()=>{try{const o=new FormData;Object.keys(l.value).forEach(e=>{o.append(e,l.value[e])}),await f.post("/api/portfolios",o,{headers:{"Content-Type":"multipart/form-data"}}),i.value=!1,m(),l.value={studentId:"",title:"",projectType:"",description:"",file:null}}catch(o){console.error("Failed to create portfolio:",o)}},j=async o=>{if(confirm("정말로 이 포트폴리오를 삭제하시겠습니까?"))try{await f.delete(`/api/portfolios/${o}`),m()}catch(e){console.error("Failed to delete portfolio:",e)}},m=async()=>{try{const o=await f.get("/api/portfolios");v.value=o.data}catch(o){console.error("Failed to load portfolios:",o)}},B=async()=>{try{const o=await f.get("/api/students");x.value=o.data}catch(o){console.error("Failed to load students:",o)}};return F(async()=>{try{await Promise.all([B(),m()])}catch(o){console.error("Failed to load initial data:",o)}}),(o,e)=>(r(),P($,null,{default:u(()=>[g(U,null,{default:u(()=>[t("div",I,[t("div",S,[t("div",N,[e[8]||(e[8]=t("div",{class:"flex items-center space-x-3"},[t("svg",{class:"w-8 h-8 text-purple-600",viewBox:"0 0 24 24"},[t("path",{fill:"currentColor",d:"M20,6H12L10,4H4A2,2 0 0,0 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8A2,2 0 0,0 20,6M20,18H4V8H20V18Z"})]),t("h1",{class:"text-2xl font-bold text-gray-800"},"포트폴리오")],-1)),t("button",{onClick:e[0]||(e[0]=s=>i.value=!0),class:"inline-flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors duration-150 shadow-sm"},[(r(),n("svg",E,[t("path",{fill:"currentColor",d:p(y)},null,8,O)])),e[7]||(e[7]=b(" 포트폴리오 업로드 "))])])]),t("div",K,[(r(!0),n(w,null,h(v.value,s=>(r(),n("div",{key:s.id,class:"bg-white rounded-xl shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden"},[t("div",Z,[t("div",z,[t("div",null,[t("h3",G,a(s.title),1),t("p",J,a(s.student.name),1)]),t("div",Q,[t("span",R,a(C(s.createdDate)),1),t("button",{onClick:wt=>j(s.id),class:"text-gray-400 hover:text-red-500 transition-colors"},[(r(),n("svg",X,[t("path",{fill:"currentColor",d:p(M)},null,8,q)]))],8,W)])])]),t("div",Y,[t("p",tt,a(s.description),1),t("div",et,[t("span",st,a(s.projectType),1),s.filePath?(r(),n("a",{key:0,href:"/api/portfolios/"+s.id+"/file",target:"_blank",class:"inline-flex items-center px-3 py-1 text-sm text-blue-600 hover:text-blue-700 transition-colors"},[(r(),n("svg",lt,[t("path",{fill:"currentColor",d:p(T)},null,8,rt)])),e[9]||(e[9]=b(" 파일 다운로드 "))],8,ot)):H("",!0)])])]))),128))]),g(A,{show:i.value,onClose:e[6]||(e[6]=s=>i.value=!1)},{title:u(()=>[t("div",nt,[(r(),n("svg",at,[t("path",{fill:"currentColor",d:p(y)},null,8,it)])),e[10]||(e[10]=t("span",null,"포트폴리오 업로드",-1))])]),content:u(()=>[t("form",{onSubmit:L(V,["prevent"]),class:"space-y-6"},[t("div",dt,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-700"},"학생",-1)),c(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.studentId=s),class:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors"},[e[11]||(e[11]=t("option",{value:""},"학생을 선택하세요",-1)),(r(!0),n(w,null,h(x.value,s=>(r(),n("option",{key:s.id,value:s.id},a(s.name),9,ut))),128))],512),[[_,l.value.studentId]])]),t("div",pt,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700"},"제목",-1)),c(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.title=s),type:"text",class:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors",placeholder:"프로젝트 제목을 입력하세요"},null,512),[[k,l.value.title]])]),t("div",ct,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700"},"프로젝트 유형",-1)),c(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.projectType=s),class:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors"},e[14]||(e[14]=[t("option",{value:""},"프로젝트 유형을 선택하세요",-1),t("option",null,"Arduino",-1),t("option",null,"Python",-1),t("option",null,"C언어",-1),t("option",null,"웹개발",-1)]),512),[[_,l.value.projectType]])]),t("div",ft,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700"},"설명",-1)),c(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=s=>l.value.description=s),rows:"4",class:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors resize-none",placeholder:"프로젝트에 대한 설명을 입력하세요"},null,512),[[k,l.value.description]])]),t("div",mt,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-700"},"파일",-1)),t("div",xt,[t("div",vt,[e[19]||(e[19]=t("svg",{class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48"},[t("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),t("div",gt,[t("label",yt,[e[17]||(e[17]=t("span",null,"파일 업로드",-1)),t("input",{type:"file",onChange:D,class:"sr-only"},null,32)]),e[18]||(e[18]=t("p",{class:"pl-1"},"또는 드래그 앤 드롭",-1))]),e[20]||(e[20]=t("p",{class:"text-xs text-gray-500"},"ZIP, PDF, DOC, DOCX 최대 10MB",-1))])])]),t("div",bt,[t("button",{type:"button",onClick:e[5]||(e[5]=s=>i.value=!1),class:"px-4 py-2 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors duration-150"}," 취소 "),e[22]||(e[22]=t("button",{type:"submit",class:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors duration-150"}," 업로드 ",-1))])],32)]),_:1},8,["show"])])]),_:1})]),_:1}))}};export{Ct as default};
