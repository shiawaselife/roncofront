import{r as d,W as pe,v as y,k as me,s as g,c as B,w as O,L as xe,o,a as L,b as e,d as l,u as x,X as ge,D as H,C as V,Y as ve,t as r,Z as be,$ as fe,a0 as ye,U as _e,n as b,F as f,a1 as we,H as c,I as v,N as R,K as U,a2 as X,a3 as K,M as W,_ as he,P as ke}from"./index-5fc67d8a.js";const Ce={class:"max-w-7xl mx-auto p-6 space-y-8"},De={class:"flex items-center justify-between bg-gradient-to-r from-orange-50 to-orange-100 p-6 rounded-2xl shadow-sm"},Te={class:"flex items-center space-x-3"},Pe={class:"w-8 h-8 text-orange-500",viewBox:"0 0 24 24"},Se=["d"],Oe={class:"w-5 h-5 mr-2",viewBox:"0 0 24 24"},Re=["d"],Ae={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},Ee={class:"bg-gradient-to-br from-blue-50 to-blue-100 p-6 rounded-xl shadow-sm"},Me={class:"flex items-center space-x-2 mb-2"},Ie={class:"w-6 h-6 text-blue-600",viewBox:"0 0 24 24"},Be=["d"],Le={class:"text-3xl font-bold text-gray-800"},Ve={class:"bg-gradient-to-br from-green-50 to-green-100 p-6 rounded-xl shadow-sm"},Ue={class:"flex items-center space-x-2 mb-2"},Ne={class:"w-6 h-6 text-green-600",viewBox:"0 0 24 24"},je=["d"],Fe={class:"text-3xl font-bold text-gray-800"},Ye={class:"bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-xl shadow-sm"},$e={class:"flex items-center space-x-2 mb-2"},Qe={class:"w-6 h-6 text-purple-600",viewBox:"0 0 24 24"},ze=["d"],Ge={class:"text-3xl font-bold text-gray-800"},He={class:"bg-gradient-to-br from-pink-50 to-pink-100 p-6 rounded-xl shadow-sm"},Xe={class:"flex items-center space-x-2 mb-2"},Ke={class:"w-6 h-6 text-pink-600",viewBox:"0 0 24 24"},We=["d"],Ze={class:"text-3xl font-bold text-gray-800"},qe={class:"bg-white rounded-xl shadow-sm overflow-hidden"},Je={class:"border-b border-gray-100 p-6"},et={class:"flex items-center space-x-3"},tt={class:"w-6 h-6 text-gray-600",viewBox:"0 0 24 24"},st=["d"],at={class:"px-2 py-1"},ot={class:"divide-y divide-gray-100"},lt={class:"flex items-center space-x-3"},rt={class:"font-medium text-gray-900"},nt={class:"text-gray-500"},it={class:"flex items-center space-x-2"},dt={class:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm"},ut={class:"bg-white rounded-xl shadow-sm overflow-hidden"},ct={class:"border-b border-gray-100 p-6"},pt={class:"flex items-center justify-between"},mt={class:"flex items-center space-x-3"},xt={class:"w-6 h-6 text-gray-600",viewBox:"0 0 24 24"},gt=["d"],vt={class:"w-5 h-5 mr-2",viewBox:"0 0 24 24"},bt=["d"],ft={class:"p-6 border-b border-gray-100 bg-gray-50"},yt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},_t=["value"],wt={class:"p-6"},ht={class:"text-lg font-semibold text-gray-800 mb-4"},kt={class:"text-sm text-gray-500"},Ct={class:"overflow-x-auto"},Dt={class:"w-full"},Tt={class:"bg-white divide-y divide-gray-200"},Pt={class:"px-6 py-4 whitespace-nowrap"},St={class:"px-6 py-4 whitespace-nowrap font-medium"},Ot={class:"px-6 py-4 whitespace-nowrap"},Rt={class:"px-6 py-4 whitespace-nowrap"},At={class:"px-6 py-4 whitespace-nowrap"},Et=["onClick"],Mt={key:0,class:"fixed inset-0 z-[100]"},It={class:"relative flex items-center justify-center min-h-screen p-4"},Bt={class:"bg-white rounded-xl shadow-xl w-full max-w-md relative p-6"},Lt={class:"space-y-4"},Vt=["value"],Ut={key:0,class:"fixed inset-0 z-[100]"},Nt={class:"relative flex items-center justify-center min-h-screen p-4"},jt={class:"bg-white rounded-xl shadow-xl w-full max-w-2xl relative p-6"},Ft={class:"grid grid-cols-2 gap-4 mb-4"},Yt=["value"],$t={class:"relative"},Qt=["value"],zt={class:"space-y-4 mb-6"},Gt={class:"bg-gray-50 p-4 rounded-lg"},Ht={class:"grid grid-cols-2 gap-4"},Xt={class:"ml-2 font-bold"},Zt={__name:"CertificatateManagement",setup(Kt){const A=d(!1),u=d({type:"COS_PRO_2",examDate:"",examTime:"",maxParticipants:30}),p=pe(),h=d([]),N=d([]),_=d({monthlyExams:0,upcomingParticipants:0,monthlyPassed:0,passRate:0}),k={COS_PRO_1:"COS Pro 1급",COS_PRO_2:"COS Pro 2급",COS_1:"COS 1급",COS_2:"COS 2급",SQLD:"SQLD",ADsP:"ADsP",FINAL:"기말고사",MID_TERM:"중간고사"},j=["COS_PRO_1","COS_PRO_2","COS_1","COS_2","SQLD","ADsP","FINAL","MID_TERM"],Z=()=>{A.value=!0},F=()=>{A.value=!1,u.value={type:"COS_PRO_2",examDate:"",examTime:"",maxParticipants:30}},E=a=>ke(a).format("YYYY-MM-DD HH:mm"),q=y(()=>{const a={};return de.value.forEach(t=>{var i;const s=t.examId;if(!a[s]){const S=I.value.find(ce=>ce.id===s);S&&(a[s]={examId:s,type:S.type,examDateTime:S.examDateTime,results:[]})}(i=a[s])==null||i.results.push(t)}),Object.values(a).filter(t=>t).sort((t,s)=>new Date(s.examDateTime)-new Date(t.examDateTime))}),Y=async()=>{try{const a=await g.get("/api/exams");h.value=a.data}catch(a){console.error("예정된 시험 조회 실패:",a),p.error("예정된 시험 목록을 불러오는데 실패했습니다.")}},$=async()=>{try{const a=await g.get("/api/exams/recent-results");N.value=a.data}catch(a){console.error("시험 결과 조회 실패:",a),p.error("시험 결과를 불러오는데 실패했습니다.")}},J=async()=>{try{const a=await g.get("/api/exams/statistics");_.value=a.data}catch(a){console.error("통계 조회 실패:",a),p.error("통계 정보를 불러오는데 실패했습니다.")}},ee=async()=>{try{const a=await g.post("/api/exams",{type:u.value.type,examDateTime:`${u.value.examDate}T${u.value.examTime}:00`,maxParticipants:u.value.maxParticipants});F(),p.success("시험이 성공적으로 생성되었습니다."),await Y()}catch(a){console.error("시험 생성 실패:",a),p.error("시험 생성에 실패했습니다.")}};me(async()=>{await Promise.all([Y(),$(),J(),ae(),ue()])});const Q=y(()=>a=>({COS_PRO_1:"COS Pro 1급",COS_PRO_2:"COS Pro 2급",COS_1:"COS 1급",COS_2:"COS 2급",SQLD:"SQLD",ADsP:"ADsP",FINAL:"기말고사",MID_TERM:"중간고사"})[a]||a),C=d(!1),m=d(null),w=d(null),M=d([]),n=d({id:null,score:null,examTakenAt:"",feedback:""}),te=y(()=>{if(!m.value||!n.value.score)return"-";const a=h.value.find(t=>t.id===m.value);return a?re(a.type,n.value.score):"-"}),z=y(()=>{if(!m.value||!n.value.score)return!1;const a=h.value.find(t=>t.id===m.value);return a?ne(a.type,n.value.score):!1}),se=()=>{C.value=!0},ae=async()=>{try{const a=await g.get("/api/students");M.value=a.data}catch(a){console.error("학생 목록 조회 실패:",a),p.error("학생 목록을 불러오는데 실패했습니다.")}},oe=async()=>{try{const a={examId:m.value,studentId:w.value,score:n.value.score,examTakenAt:n.value.examTakenAt,feedback:n.value.feedback};n.value.id?(await g.put(`/api/exam-results/${n.value.id}`,a),p.success("시험 결과가 수정되었습니다.")):(await g.post("/api/exam-results",a),p.success("시험 결과가 저장되었습니다.")),G(),await $()}catch(a){console.error("시험 결과 저장 실패:",a),p.error("시험 결과 저장에 실패했습니다.")}},le=a=>{m.value=a.examId,w.value=a.studentId,n.value={id:a.id,score:a.score,examTakenAt:a.examTakenAt,feedback:a.feedback},C.value=!0},G=()=>{C.value=!1,m.value=null,w.value=null,n.value={id:null,score:null,examTakenAt:"",feedback:""}},re=(a,t)=>{const s=t/100*100;return s>=90?"A":s>=80?"B":s>=70?"C":s>=60?"D":"F"},ne=(a,t)=>t/100*100>=60,D=d(""),T=d(""),P=d(""),ie=y(()=>{if(!D.value)return M.value;const a=D.value.toLowerCase();return M.value.filter(t=>t.name.toLowerCase().includes(a))}),de=y(()=>{let a=[...N.value];if(T.value){const t=T.value.toLowerCase();a=a.filter(s=>s.studentName.toLowerCase().includes(t))}return P.value&&(a=a.filter(t=>t.examType===k[P.value])),a}),I=d([]),ue=async()=>{try{const a=await g.get("/api/exams/all");I.value=a.data}catch(a){console.error("시험 목록 조회 실패:",a),p.error("시험 목록을 불러오는데 실패했습니다.")}};return(a,t)=>(o(),B(xe,null,{default:O(()=>[L(he,null,{default:O(()=>[e("div",Ce,[e("div",De,[e("div",Te,[(o(),l("svg",Pe,[e("path",{fill:"currentColor",d:x(ge)},null,8,Se)])),t[12]||(t[12]=e("h1",{class:"text-2xl font-bold text-gray-800"},"자격증 관리",-1))]),e("button",{onClick:Z,class:"flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg shadow-sm transition duration-150 ease-in-out"},[(o(),l("svg",Oe,[e("path",{fill:"currentColor",d:x(H)},null,8,Re)])),t[13]||(t[13]=V(" 시험 추가 "))])]),e("div",Ae,[e("div",Ee,[e("div",Me,[(o(),l("svg",Ie,[e("path",{fill:"currentColor",d:x(ve)},null,8,Be)])),t[14]||(t[14]=e("span",{class:"text-sm font-medium text-gray-600"},"이번 달 시험",-1))]),e("div",Le,r(_.value.monthlyExams)+"건",1)]),e("div",Ve,[e("div",Ue,[(o(),l("svg",Ne,[e("path",{fill:"currentColor",d:x(be)},null,8,je)])),t[15]||(t[15]=e("span",{class:"text-sm font-medium text-gray-600"},"응시 예정",-1))]),e("div",Fe,r(_.value.upcomingParticipants)+"명",1)]),e("div",Ye,[e("div",$e,[(o(),l("svg",Qe,[e("path",{fill:"currentColor",d:x(fe)},null,8,ze)])),t[16]||(t[16]=e("span",{class:"text-sm font-medium text-gray-600"},"이번 달 합격",-1))]),e("div",Ge,r(_.value.monthlyPassed)+"명",1)]),e("div",He,[e("div",Xe,[(o(),l("svg",Ke,[e("path",{fill:"currentColor",d:x(ye)},null,8,We)])),t[17]||(t[17]=e("span",{class:"text-sm font-medium text-gray-600"},"평균 합격률",-1))]),e("div",Ze,r(_.value.passRate)+"%",1)])]),e("div",qe,[e("div",Je,[e("div",et,[(o(),l("svg",tt,[e("path",{fill:"indigo",d:x(_e)},null,8,st)])),t[18]||(t[18]=e("h2",{class:"text-lg font-semibold text-gray-800"},"예정된 시험",-1))])]),e("div",at,[e("ul",ot,[(o(!0),l(f,null,b(h.value,s=>(o(),l("li",{key:s.id,class:"py-4 flex items-center justify-between hover:bg-gray-50 rounded-lg px-4 transition duration-150 ease-in-out"},[e("div",lt,[e("span",rt,r(Q.value(s.type)),1),e("span",nt,r(E(s.examDateTime)),1)]),e("div",it,[e("span",dt,r(s.currentParticipants)+"/"+r(s.maxParticipants)+"명 ",1)])]))),128))])])]),e("div",ut,[e("div",ct,[e("div",pt,[e("div",mt,[(o(),l("svg",xt,[e("path",{fill:"orange",d:x(we)},null,8,gt)])),t[19]||(t[19]=e("h2",{class:"text-lg font-semibold text-gray-800"},"최근 시험 결과",-1))]),e("button",{onClick:se,class:"flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg shadow-sm transition duration-150 ease-in-out"},[(o(),l("svg",vt,[e("path",{fill:"currentColor",d:x(H)},null,8,bt)])),t[20]||(t[20]=V(" 결과 입력 "))])])]),e("div",ft,[e("div",yt,[c(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>T.value=s),placeholder:"학생 이름으로 검색...",class:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[v,T.value]]),c(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>P.value=s),class:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[t[21]||(t[21]=e("option",{value:""},"모든 시험 유형",-1)),(o(),l(f,null,b(j,s=>e("option",{key:s,value:s},r(k[s]),9,_t)),64))],512),[[R,P.value]])])]),e("div",wt,[(o(!0),l(f,null,b(q.value,s=>(o(),l("div",{key:s.examId,class:"mb-8"},[e("div",ht,[V(r(k[s.type])+" ",1),e("span",kt,r(E(s.examDateTime)),1)]),e("div",Ct,[e("table",Dt,[t[22]||(t[22]=e("thead",null,[e("tr",{class:"bg-gray-50"},[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"이름"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"점수"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"등급"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"결과"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"관리")])],-1)),e("tbody",Tt,[(o(!0),l(f,null,b(s.results,i=>(o(),l("tr",{key:i.id,class:"hover:bg-gray-50 transition duration-150 ease-in-out"},[e("td",Pt,r(i.studentName),1),e("td",St,r(i.score),1),e("td",Ot,[e("span",{class:U(["px-2 py-1 text-sm rounded-full",{"bg-green-100 text-green-800":i.grade==="A","bg-blue-100 text-blue-800":i.grade==="B","bg-yellow-100 text-yellow-800":i.grade==="C","bg-orange-100 text-orange-800":i.grade==="D","bg-red-100 text-red-800":i.grade==="F"}])},r(i.grade),3)]),e("td",Rt,[e("span",{class:U(["px-2 py-1 text-sm rounded-full",i.passed?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},r(i.passed?"합격":"불합격"),3)]),e("td",At,[e("button",{onClick:S=>le(i),class:"text-blue-600 hover:text-blue-800 transition duration-150 ease-in-out"}," 수정 ",8,Et)])]))),128))])])])]))),128))])])]),(o(),B(X,{to:"body"},[L(K,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:O(()=>[A.value?(o(),l("div",Mt,[t[28]||(t[28]=e("div",{class:"absolute inset-0 bg-gray-900/75 backdrop-blur-sm"},null,-1)),e("div",It,[e("div",Bt,[t[27]||(t[27]=e("h2",{class:"text-xl font-bold mb-4"},"시험 추가",-1)),e("div",Lt,[e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"시험 종류",-1)),c(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>u.value.type=s),class:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[(o(),l(f,null,b(j,s=>e("option",{key:s,value:s},r(Q.value(s)),9,Vt)),64))],512),[[R,u.value.type]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"시험 일자",-1)),c(e("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=s=>u.value.examDate=s),class:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[v,u.value.examDate]])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"시험 시간",-1)),c(e("input",{type:"time","onUpdate:modelValue":t[4]||(t[4]=s=>u.value.examTime=s),class:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[v,u.value.examTime]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"최대 인원",-1)),c(e("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=s=>u.value.maxParticipants=s),class:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[v,u.value.maxParticipants]])])]),e("div",{class:"flex justify-end space-x-2 mt-6"},[e("button",{onClick:F,class:"px-4 py-2 border border-gray-200 rounded-lg hover:bg-gray-100 transition duration-150 ease-in-out"}," 취소 "),e("button",{onClick:ee,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-150 ease-in-out"}," 추가 ")])])])])):W("",!0)]),_:1})])),(o(),B(X,{to:"body"},[L(K,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:O(()=>[C.value?(o(),l("div",Ut,[t[37]||(t[37]=e("div",{class:"absolute inset-0 bg-gray-900/75 backdrop-blur-sm"},null,-1)),e("div",Nt,[e("div",jt,[t[36]||(t[36]=e("h2",{class:"text-xl font-bold mb-4"},"시험 결과 관리",-1)),e("div",Ft,[e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"시험 선택",-1)),c(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>m.value=s),class:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[(o(!0),l(f,null,b(I.value,s=>(o(),l("option",{key:s.id,value:s.id},r(k[s.type])+" ("+r(E(s.examDateTime))+") ",9,Yt))),128))],512),[[R,m.value]])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"학생 선택",-1)),e("div",$t,[c(e("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=s=>D.value=s),placeholder:"학생 이름 검색...",class:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-2"},null,512),[[v,D.value]]),c(e("select",{"onUpdate:modelValue":t[8]||(t[8]=s=>w.value=s),class:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",size:"5"},[(o(!0),l(f,null,b(ie.value,s=>(o(),l("option",{key:s.id,value:s.id},r(s.name),9,Qt))),128))],512),[[R,w.value]])])])]),e("div",zt,[e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"점수",-1)),c(e("input",{type:"number","onUpdate:modelValue":t[9]||(t[9]=s=>n.value.score=s),class:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0",max:"100"},null,512),[[v,n.value.score]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"시험 응시 일시",-1)),c(e("input",{type:"datetime-local","onUpdate:modelValue":t[10]||(t[10]=s=>n.value.examTakenAt=s),class:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[v,n.value.examTakenAt]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"피드백",-1)),c(e("textarea",{"onUpdate:modelValue":t[11]||(t[11]=s=>n.value.feedback=s),rows:"3",class:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[v,n.value.feedback]])]),e("div",Gt,[e("div",Ht,[e("div",null,[t[34]||(t[34]=e("span",{class:"text-sm text-gray-500"},"등급:",-1)),e("span",Xt,r(te.value),1)]),e("div",null,[t[35]||(t[35]=e("span",{class:"text-sm text-gray-500"},"결과:",-1)),e("span",{class:U(["ml-2 font-bold",z.value?"text-green-600":"text-red-600"])},r(z.value?"합격":"불합격"),3)])])])]),e("div",{class:"flex justify-end space-x-2"},[e("button",{onClick:G,class:"px-4 py-2 border border-gray-200 rounded-lg hover:bg-gray-100 transition duration-150 ease-in-out"}," 취소 "),e("button",{onClick:oe,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-150 ease-in-out"}," 저장 ")])])])])):W("",!0)]),_:1})]))]),_:1})]),_:1}))}};export{Zt as default};
