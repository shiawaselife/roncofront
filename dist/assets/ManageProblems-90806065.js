import{r as n,k as z,c as L,w as N,L as q,s as y,o as r,a as P,b as t,C as d,d as u,n as j,t as m,F as I,R as S,E as f,G as x,J as D,_ as F}from"./index-ca36a574.js";const E={class:"container mx-auto px-4 py-8"},T={class:"mb-6 flex justify-between items-center"},A={class:"bg-white shadow-md rounded-lg overflow-hidden"},G={class:"overflow-x-auto"},H={class:"min-w-full divide-y divide-gray-200"},J={class:"bg-white divide-y divide-gray-200"},O={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},R={class:"px-6 py-4 whitespace-nowrap"},K={class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800"},Q={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},W={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},X=["onClick"],Y=["onClick"],Z={key:0,class:"fixed inset-0 z-50","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},tt={class:"fixed inset-0 z-50 overflow-y-auto"},et={class:"flex min-h-full items-center justify-center p-4 text-center sm:p-0"},st={class:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-3xl"},ot={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},lt={class:"sm:flex sm:items-start"},at={class:"mt-3 text-center sm:mt-0 sm:text-left w-full"},it={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"},nt={class:"mt-4"},rt={class:"grid md:grid-cols-2 gap-6"},dt={class:"space-y-2"},ut={class:"space-y-2"},ct={class:"space-y-2"},mt={class:"space-y-2"},ft={class:"space-y-4"},xt={class:"space-y-3"},pt=["onUpdate:modelValue","placeholder"],gt=["onClick","disabled"],yt={class:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse"},vt=["disabled"],bt={key:1,class:"fixed inset-0 z-50","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},ht={class:"fixed inset-0 z-50 overflow-y-auto"},wt={class:"flex min-h-full items-center justify-center p-4 text-center sm:p-0"},_t={class:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:max-w-lg sm:w-full"},kt={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},jt={__name:"ManageProblems",setup(Ct){const _=n([]),v=n(!1),p=n(!1),c=n(!1),a=n(null),g=n(null),b={categoryId:"",categoryName:"",title:"",description:"",instructions:[""]},o=n({...b}),h=async()=>{try{const s=await y.get("/api/problems");_.value=s.data}catch(s){console.error("문제 목록 로딩 중 오류 발생:",s)}},k=(s=null)=>{var e;s?(a.value=s,o.value={categoryId:s.categoryId,categoryName:s.categoryName,title:s.title,description:s.description,instructions:(e=s.instructions)!=null&&e.length?s.instructions:[""]}):(a.value=null,o.value={...b}),v.value=!0},w=()=>{v.value=!1,a.value=null,o.value={...b}},V=()=>{o.value.instructions.push("")},$=s=>{o.value.instructions.length>1&&(o.value.instructions=o.value.instructions.filter((e,l)=>l!==s))},M=async()=>{try{p.value=!0;const s={...o.value,instructions:o.value.instructions.filter(e=>e.trim()!=="")};a.value?await y.put(`/api/problems/${a.value.id}`,s):await y.post("/api/problems",s),await h(),w()}catch(s){console.error("문제 저장 중 오류 발생:",s)}finally{p.value=!1}},B=s=>{g.value=s,c.value=!0},U=async()=>{if(g.value)try{await y.delete(`/api/problems/${g.value.id}`),await h(),c.value=!1,g.value=null}catch(s){console.error("문제 삭제 중 오류 발생:",s)}};return z(()=>{h()}),(s,e)=>(r(),L(q,null,{default:N(()=>[P(F,null,{default:N(()=>[t("div",E,[t("div",T,[e[8]||(e[8]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"문제 관리"),t("p",{class:"mt-1 text-sm text-gray-500"},"프로그래밍 문제를 관리합니다")],-1)),t("button",{onClick:e[0]||(e[0]=l=>k()),class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700"},e[7]||(e[7]=[t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),d(" 새 문제 만들기 ")]))]),t("div",A,[t("div",G,[t("table",H,[e[9]||(e[9]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ID"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"카테고리"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"제목"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"관리")])],-1)),t("tbody",J,[(r(!0),u(I,null,j(_.value,l=>(r(),u("tr",{key:l.id,class:"hover:bg-gray-50"},[t("td",O,m(l.id),1),t("td",R,[t("span",K,m(l.categoryName),1)]),t("td",Q,m(l.title),1),t("td",W,[t("button",{onClick:i=>k(l),class:"text-indigo-600 hover:text-indigo-900 mr-3"}," 수정 ",8,X),t("button",{onClick:i=>B(l),class:"text-red-600 hover:text-red-900"}," 삭제 ",8,Y)])]))),128))])])])]),v.value?(r(),u("div",Z,[t("div",{class:"fixed inset-0 bg-black bg-opacity-70 transition-opacity",onClick:w}),t("div",tt,[t("div",et,[t("div",st,[t("div",ot,[t("div",lt,[t("div",at,[t("h3",it,m(a.value?"문제 수정":"새 문제 만들기"),1),t("div",nt,[t("form",{onSubmit:S(M,["prevent"]),class:"space-y-6"},[t("div",rt,[t("div",dt,[e[10]||(e[10]=t("label",{for:"categoryId",class:"block text-sm font-medium text-gray-700"},[d(" 카테고리 ID "),t("span",{class:"text-red-500"},"*")],-1)),f(t("input",{id:"categoryId","onUpdate:modelValue":e[1]||(e[1]=l=>o.value.categoryId=l),type:"text",class:"w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:""},null,512),[[x,o.value.categoryId]])]),t("div",ut,[e[11]||(e[11]=t("label",{for:"categoryName",class:"block text-sm font-medium text-gray-700"},[d(" 카테고리 이름 "),t("span",{class:"text-red-500"},"*")],-1)),f(t("input",{id:"categoryName","onUpdate:modelValue":e[2]||(e[2]=l=>o.value.categoryName=l),type:"text",class:"w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:""},null,512),[[x,o.value.categoryName]])])]),t("div",ct,[e[12]||(e[12]=t("label",{for:"title",class:"block text-sm font-medium text-gray-700"},[d(" 제목 "),t("span",{class:"text-red-500"},"*")],-1)),f(t("input",{id:"title","onUpdate:modelValue":e[3]||(e[3]=l=>o.value.title=l),type:"text",class:"w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:""},null,512),[[x,o.value.title]])]),t("div",mt,[e[13]||(e[13]=t("label",{for:"description",class:"block text-sm font-medium text-gray-700"},[d(" 설명 "),t("span",{class:"text-red-500"},"*")],-1)),f(t("textarea",{id:"description","onUpdate:modelValue":e[4]||(e[4]=l=>o.value.description=l),rows:"4",class:"w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:""},null,512),[[x,o.value.description]])]),t("div",ft,[t("div",{class:"flex justify-between items-center"},[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700"},[d(" 지시사항 "),t("span",{class:"text-red-500"},"*")],-1)),t("button",{type:"button",onClick:V,class:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700"}," 추가 ")]),t("div",xt,[(r(!0),u(I,null,j(o.value.instructions,(l,i)=>(r(),u("div",{key:i,class:"flex gap-2"},[f(t("input",{"onUpdate:modelValue":C=>o.value.instructions[i]=C,type:"text",class:"flex-1 px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:`지시사항 ${i+1}`},null,8,pt),[[x,o.value.instructions[i]]]),t("button",{type:"button",onClick:C=>$(i),class:"px-2 py-2 text-red-600 hover:text-red-700",disabled:o.value.instructions.length===1}," 삭제 ",8,gt)]))),128))])]),t("div",yt,[t("button",{type:"submit",disabled:p.value,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm"},m(p.value?"처리 중...":a.value?"수정하기":"만들기"),9,vt),t("button",{type:"button",onClick:w,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:w-auto sm:text-sm"}," 취소 ")])],32)])])])])])])])])):D("",!0),c.value?(r(),u("div",bt,[t("div",{class:"fixed inset-0 bg-black bg-opacity-70 transition-opacity",onClick:e[5]||(e[5]=l=>c.value=!1)}),t("div",ht,[t("div",wt,[t("div",_t,[e[15]||(e[15]=t("div",{class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},[t("div",{class:"sm:flex sm:items-start"},[t("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[t("svg",{class:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])]),t("div",{class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},[t("h3",{class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"},"문제 삭제"),t("div",{class:"mt-2"},[t("p",{class:"text-sm text-gray-500"}," 이 문제를 정말 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다. ")])])])],-1)),t("div",kt,[t("button",{type:"button",onClick:U,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"}," 삭제 "),t("button",{type:"button",onClick:e[6]||(e[6]=l=>c.value=!1),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:w-auto sm:text-sm"}," 취소 ")])])])])])):D("",!0)])]),_:1})]),_:1}))}};export{jt as default};
