import{k as se,r,v as oe,y as k,z as T,n as ae,x as j,c as ne,w as A,_ as le,o as a,a as de,b as e,d as l,u as g,P as ie,I as h,O,Q as re,L as p,p as C,t as d,R as ce,D as N,F as S,S as ue,T as _e,U as ge,K as he,N as pe,M as Y,j as me,q as xe,s as ve}from"./index-e0e2da98.js";import{d as m}from"./dayjs.min-ebd611c2.js";const n=x=>(xe("data-v-fe75de57"),x=x(),ve(),x),ye={class:"flex gap-6"},fe={class:"w-1/3 space-y-4"},be={class:"bg-white rounded-xl shadow-sm p-4"},we={class:"flex items-center justify-between mb-6"},ke={class:"flex items-center gap-2"},Ce={class:"w-6 h-6 text-indigo-600",viewBox:"0 0 24 24"},Se=["d"],Me=n(()=>e("h1",{class:"text-xl font-semibold text-gray-900"},"학생 관리",-1)),Pe={class:"relative flex-1 mx-4"},Be={class:"w-4 h-4",viewBox:"0 0 24 24"},Te=["d"],je={class:"space-y-3"},Oe=["onClick"],Ve={class:"flex justify-between items-start mb-2"},De={class:"font-semibold text-gray-900"},Ie=["onClick"],Le={class:"text-sm text-gray-600"},Ue=n(()=>e("br",null,null,-1)),$e={key:0,class:"flex justify-between items-center pt-4 border-t border-gray-200"},Ae=["disabled"],Ne={class:"text-sm text-gray-600"},Ye=["disabled"],Re={class:"flex-1 space-y-6"},Fe={class:"bg-white rounded-xl shadow-sm p-6"},He={class:"flex items-center gap-2 mb-6"},qe={class:"w-6 h-6 text-gray-900",viewBox:"0 0 24 24"},ze=["d"],Ee=n(()=>e("h2",{class:"text-xl font-semibold text-gray-900"},"기본 정보",-1)),Qe={key:0,class:"grid grid-cols-2 gap-6"},We=n(()=>e("label",{class:"text-sm font-medium text-gray-600"},"이름",-1)),Ke={class:"mt-1 font-semibold text-gray-900"},Ge=n(()=>e("label",{class:"text-sm font-medium text-gray-600"},"연락처",-1)),Je={class:"mt-1 text-gray-900"},Xe=n(()=>e("label",{class:"text-sm font-medium text-gray-600"},"보호자 연락처",-1)),Ze={class:"mt-1 text-gray-900"},et=n(()=>e("label",{class:"text-sm font-medium text-gray-600"},"생년월일",-1)),tt={class:"mt-1 text-gray-900"},st={class:"bg-white rounded-xl shadow-sm p-6"},ot={class:"flex items-center gap-2 mb-6"},at={class:"w-6 h-6 text-blue-600",viewBox:"0 0 24 24"},nt=["d"],lt=n(()=>e("h2",{class:"text-xl font-semibold text-gray-900"},"출결 현황",-1)),dt={key:0},it={class:"flex items-center gap-4 mb-6"},rt={class:"flex items-center gap-2"},ct=n(()=>e("span",{class:"text-sm font-medium text-gray-600"},"연도:",-1)),ut={class:"flex items-center gap-2"},_t=n(()=>e("span",{class:"text-sm font-medium text-gray-600"},"월:",-1)),gt={class:"overflow-hidden rounded-lg border border-gray-200"},ht={class:"min-w-full divide-y divide-gray-200"},pt=n(()=>e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"날짜"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"요일"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"등원시간")])],-1)),mt={class:"bg-white divide-y divide-gray-200"},xt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},vt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},yt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ft={class:"bg-white rounded-xl shadow-sm p-6"},bt={class:"flex items-center gap-2 mb-6"},wt={class:"w-6 h-6 text-green-600",viewBox:"0 0 24 24"},kt=["d"],Ct=n(()=>e("h2",{class:"text-xl font-semibold text-gray-900"},"학습 현황",-1)),St={key:0,class:"space-y-6"},Mt={class:"flex justify-between mb-2"},Pt={class:"text-sm font-medium text-gray-700"},Bt=n(()=>e("span",{class:"text-sm font-medium text-gray-700"},"50%",-1)),Tt={class:"w-full bg-gray-200 rounded-full h-2.5"},jt={class:"bg-white rounded-xl shadow-sm p-6"},Ot={class:"flex items-center gap-2 mb-6"},Vt={class:"w-6 h-6 text-purple-600",viewBox:"0 0 24 24"},Dt=["d"],It=n(()=>e("h2",{class:"text-xl font-semibold text-gray-900"},"보강 목록",-1)),Lt={class:"flex gap-4 mb-6"},Ut=n(()=>e("option",{value:"week"},"주간",-1)),$t=n(()=>e("option",{value:"month"},"월간",-1)),At=[Ut,$t],Nt=n(()=>e("option",{value:"asc"},"오름차순",-1)),Yt=n(()=>e("option",{value:"desc"},"내림차순",-1)),Rt=[Nt,Yt],Ft={class:"space-y-3"},Ht={class:"flex justify-between items-center"},qt={class:"font-semibold text-gray-900"},zt={class:"text-sm text-gray-600"},Et=n(()=>e("span",{class:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-medium"}," 보강 ",-1)),V=6,Qt={__name:"StudentsManagement",setup(x){const R={mon:"월요일",tue:"화요일",wed:"수요일",thu:"목요일",fri:"금요일",sat:"토요일",sun:"일요일"},M=r([]),i=r(null),_=r(""),P=r(null),D=oe(),I=k(()=>{if(!_.value)return M.value;const s=_.value.toLowerCase();return M.value.filter(o=>o.name.toLowerCase().includes(s))});function F(s){i.value=s,B(s.id),$(s.id)}function H(s){D.push({name:"studentInfo",params:{id:s}})}function q(){D.push("/forms")}function z(){P.value&&clearTimeout(P.value),P.value=setTimeout(()=>{},300)}function E(){_.value=""}const v=r(m().year()),y=r(m().month()+1),L=r([]);function Q(s){return m(s).format("YYYY-MM-DD")}function W(s){const o=["일","월","화","수","목","금","토"],t=m(s).day();return o[t]+"요일"}function K(s){return s?m(s).format("HH:mm"):"-"}function G(s){return{Python:"bg-blue-500","COS Pro":"bg-green-500",타자연습:"bg-purple-500"}[s]||"bg-gray-500"}async function B(s){if(s)try{const o=await j.get(`/api/attendance/${s}`,{params:{year:v.value,month:y.value}});L.value=o.data}catch(o){console.error(o),alert("학생 출결 데이터 조회 실패")}}const f=r("week"),b=r("asc"),U=r([]);T([f,b],()=>{i.value&&$(i.value.id)}),T([v,y],()=>{i.value&&B(i.value.id)});async function $(s){if(s)try{const o=await j.get("/api/classes/makeup",{params:{range:f.value,order:b.value}});U.value=o.data}catch(o){console.error(o),alert("보강 목록 조회 실패")}}ae(()=>{J()});async function J(){try{const s=await j.get("/api/students");M.value=s.data}catch(s){console.error(s),alert("학생 목록 불러오기 실패")}}const u=r(1),X=k(()=>{const s=(u.value-1)*V,o=s+V;return I.value.slice(s,o)}),w=k(()=>Math.ceil(I.value.length/V));function Z(){u.value>1&&u.value--}function ee(){u.value<w.value&&u.value++}T(_,()=>{u.value=1});const te=k(()=>i.value?U.value.filter(s=>{var o;return((o=s.student)==null?void 0:o.id)===i.value.id}):[]);return(s,o)=>(a(),ne(le,null,{default:A(()=>[de(me,null,{default:A(()=>[e("div",ye,[e("div",fe,[e("div",be,[e("div",we,[e("div",ke,[(a(),l("svg",Ce,[e("path",{fill:"currentColor",d:g(ie)},null,8,Se)])),Me]),e("div",Pe,[h(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=t=>_.value=t),placeholder:"학생 이름 검색...",class:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",onInput:z},null,544),[[O,_.value]]),_.value?(a(),l("button",{key:0,onClick:E,class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[(a(),l("svg",Be,[e("path",{fill:"currentColor",d:g(re)},null,8,Te)]))])):p("",!0)]),e("button",{class:"inline-flex items-center justify-center px-3 py-1 border border-indigo-600 rounded-lg text-indigo-600 hover:bg-indigo-50 transition-colors",onClick:q}," + ")]),e("div",je,[(a(!0),l(S,null,C(X.value,t=>(a(),l("div",{key:t.id,class:"p-4 bg-white border border-gray-200 rounded-lg hover:border-indigo-500 transition-colors shadow-sm cursor-pointer",onClick:c=>F(t)},[e("div",Ve,[e("div",De,d(t.name),1),e("button",{class:"px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded hover:bg-gray-200",onClick:ce(c=>H(t.id),["stop"])}," 수정 ",8,Ie)]),e("div",Le,[N(d(t.daysOfWeek.map(c=>R[c]).join(", "))+" ",1),Ue,N(" 수업 시간 : "+d(t.startTime)+" ~ "+d(t.endTime),1)])],8,Oe))),128)),w.value>1?(a(),l("div",$e,[e("button",{class:"px-3 py-1 rounded text-sm text-gray-600 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",disabled:u.value===1,onClick:Z}," 이전 ",8,Ae),e("span",Ne,d(u.value)+" / "+d(w.value),1),e("button",{class:"px-3 py-1 rounded text-sm text-gray-600 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",disabled:u.value===w.value,onClick:ee}," 다음 ",8,Ye)])):p("",!0)])])]),e("div",Re,[e("div",Fe,[e("div",He,[(a(),l("svg",qe,[e("path",{fill:"currentColor",d:g(ue)},null,8,ze)])),Ee]),i.value?(a(),l("div",Qe,[e("div",null,[We,e("p",Ke,d(i.value.name),1)]),e("div",null,[Ge,e("p",Je,d(i.value.phone),1)]),e("div",null,[Xe,e("p",Ze,d(i.value.parent),1)]),e("div",null,[et,e("p",tt,d(i.value.birthday),1)])])):p("",!0)]),e("div",st,[e("div",ot,[(a(),l("svg",at,[e("path",{fill:"currentColor",d:g(_e)},null,8,nt)])),lt]),i.value?(a(),l("div",dt,[e("div",it,[e("label",rt,[ct,h(e("input",{type:"number","onUpdate:modelValue":o[1]||(o[1]=t=>v.value=t),class:"px-3 py-1 border border-gray-200 rounded-lg text-sm w-24 focus:ring-2 focus:ring-indigo-500"},null,512),[[O,v.value]])]),e("label",ut,[_t,h(e("input",{type:"number","onUpdate:modelValue":o[2]||(o[2]=t=>y.value=t),class:"px-3 py-1 border border-gray-200 rounded-lg text-sm w-20 focus:ring-2 focus:ring-indigo-500",min:"1",max:"12"},null,512),[[O,y.value]])]),e("button",{class:"px-4 py-1 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-sm transition-colors",onClick:o[3]||(o[3]=t=>B(i.value.id))}," 조회 ")]),e("div",gt,[e("table",ht,[pt,e("tbody",mt,[(a(!0),l(S,null,C(L.value,t=>(a(),l("tr",{key:t.id,class:"hover:bg-gray-50"},[e("td",xt,d(Q(t.date)),1),e("td",vt,d(W(t.date)),1),e("td",yt,d(K(t.createdAt)),1)]))),128))])])])])):p("",!0)]),e("div",ft,[e("div",bt,[(a(),l("svg",wt,[e("path",{fill:"currentColor",d:g(ge)},null,8,kt)])),Ct]),i.value?(a(),l("div",St,[(a(),l(S,null,C(["Python","COS Pro","타자연습"],(t,c)=>e("div",{key:c},[e("div",Mt,[e("span",Pt,d(c),1),Bt]),e("div",Tt,[e("div",{class:he(["h-2.5 rounded-full transition-all duration-300",G(c)]),style:{width:"50%"}},null,2)])])),64))])):p("",!0)]),e("div",jt,[e("div",Ot,[(a(),l("svg",Vt,[e("path",{fill:"currentColor",d:g(pe)},null,8,Dt)])),It]),e("div",Lt,[h(e("select",{"onUpdate:modelValue":o[4]||(o[4]=t=>f.value=t),class:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500"},At,512),[[Y,f.value]]),h(e("select",{"onUpdate:modelValue":o[5]||(o[5]=t=>b.value=t),class:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500"},Rt,512),[[Y,b.value]])]),e("div",Ft,[(a(!0),l(S,null,C(te.value,t=>{var c;return a(),l("div",{key:t.id,class:"p-4 bg-gray-50 rounded-lg border border-gray-200"},[e("div",Ht,[e("div",null,[e("div",qt,d((c=t.student)==null?void 0:c.name),1),e("div",zt,d(t.classDate)+" ("+d(t.startTime)+"~"+d(t.endTime)+") ",1)]),Et])])}),128))])])])])]),_:1})]),_:1}))}},Gt=se(Qt,[["__scopeId","data-v-fe75de57"]]);export{Gt as default};
