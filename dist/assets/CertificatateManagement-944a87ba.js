import{r,T as re,x as b,n as ie,v,c as ce,w as Y,_ as ue,o as a,a as me,b as e,d as o,u as x,U as _e,E as $,H as Q,C as c,K as P,F as h,p as f,t as n,L as p,I as z,G,V as xe,W as ve,X as pe,Y as he,R as fe,Z as be,j as ge}from"./index-a961658a.js";import{d as ye}from"./dayjs.min-91b9ea6a.js";const we={class:"flex items-center mb-6 justify-between"},Ce={class:"flex items-center"},ke={class:"w-6 h-6 mr-2 text-orange-500",viewBox:"0 0 24 24"},De=["d"],Se=e("h1",{class:"text-2xl font-bold"},"자격증 관리",-1),Te={class:"w-5 h-5 mr-2",viewBox:"0 0 24 24"},Oe=["d"],Pe={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Re={class:"bg-white rounded-lg p-6 w-full max-w-md"},Ee=e("h2",{class:"text-xl font-bold mb-4"},"시험 추가",-1),Ae={class:"space-y-4"},Me=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"시험 종류",-1),Ie=["value"],Ve=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"시험 일자",-1),Be=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"시험 시간",-1),Le=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"최대 인원",-1),je={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ue={class:"bg-white rounded-lg p-6 w-full max-w-2xl"},Ne=e("h2",{class:"text-xl font-bold mb-4"},"시험 결과 관리",-1),Fe={class:"grid grid-cols-2 gap-4 mb-4"},Ye=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"시험 선택",-1),$e=["value"],Qe=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"학생 선택",-1),ze={class:"relative"},Ge=["value"],He={class:"space-y-4 mb-6"},Xe=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"점수",-1),Ke=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"시험 응시 일시",-1),We=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"피드백",-1),Ze={class:"bg-gray-50 p-4 rounded-lg"},qe={class:"grid grid-cols-2 gap-4"},Je=e("span",{class:"text-sm text-gray-500"},"등급:",-1),et={class:"ml-2 font-bold"},tt=e("span",{class:"text-sm text-gray-500"},"결과:",-1),st={class:"grid grid-cols-4 gap-4 mb-6"},lt={class:"bg-white p-4 rounded shadow text-center"},at={class:"flex items-center justify-center mb-1"},ot={class:"w-5 h-5 mr-1 text-blue-600",viewBox:"0 0 24 24"},nt=["d"],dt=e("span",{class:"text-sm text-gray-500"},"이번 달 시험",-1),rt={class:"text-2xl font-bold"},it={class:"bg-white p-4 rounded shadow text-center"},ct={class:"flex items-center justify-center mb-1"},ut={class:"w-5 h-5 mr-1 text-green-600",viewBox:"0 0 24 24"},mt=["d"],_t=e("span",{class:"text-sm text-gray-500"},"응시 예정",-1),xt={class:"text-2xl font-bold"},vt={class:"bg-white p-4 rounded shadow text-center"},pt={class:"flex items-center justify-center mb-1"},ht={class:"w-5 h-5 mr-1 text-purple-600",viewBox:"0 0 24 24"},ft=["d"],bt=e("span",{class:"text-sm text-gray-500"},"이번 달 합격",-1),gt={class:"text-2xl font-bold"},yt={class:"bg-white p-4 rounded shadow text-center"},wt={class:"flex items-center justify-center mb-1"},Ct={class:"w-5 h-5 mr-1 text-pink-500",viewBox:"0 0 24 24"},kt=["d"],Dt=e("span",{class:"text-sm text-gray-500"},"평균 합격률",-1),St={class:"text-2xl font-bold"},Tt={class:"bg-white p-4 rounded shadow mb-6"},Ot={class:"flex items-center mb-2"},Pt={class:"w-5 h-5 mr-2 text-gray-600",viewBox:"0 0 24 24"},Rt=["d"],Et=e("h2",{class:"text-lg font-semibold"},"예정된 시험",-1),At={class:"space-y-3"},Mt={class:"text-sm text-gray-500"},It={class:"bg-white p-4 rounded shadow"},Vt={class:"flex items-center justify-between mb-4"},Bt={class:"flex items-center"},Lt={class:"w-5 h-5 mr-2 text-gray-600",viewBox:"0 0 24 24"},jt=["d"],Ut=e("h2",{class:"text-lg font-semibold"},"최근 시험 결과",-1),Nt={class:"w-4 h-4 mr-1",viewBox:"0 0 24 24"},Ft=["d"],Yt={class:"flex gap-4 mb-4"},$t={class:"flex-1"},Qt={class:"flex-1"},zt=e("option",{value:""},"모든 시험 유형",-1),Gt=["value"],Ht={class:"mb-2 font-bold"},Xt={class:"w-full mb-6 text-left border"},Kt=e("thead",null,[e("tr",{class:"bg-gray-100 border-b"},[e("th",{class:"p-2"},"이름"),e("th",{class:"p-2"},"점수"),e("th",{class:"p-2"},"등급"),e("th",{class:"p-2"},"결과"),e("th",{class:"p-2"},"관리")])],-1),Wt={class:"p-2"},Zt={class:"p-2"},qt={class:"p-2"},Jt={class:"p-2"},es=["onClick"],as={__name:"CertificatateManagement",setup(ts){const R=r(!1),i=r({type:"COS_PRO_2",examDate:"",examTime:"",maxParticipants:30}),u=re(),w=r([]),I=r([]),g=r({monthlyExams:0,upcomingParticipants:0,monthlyPassed:0,passRate:0}),C={COS_PRO_1:"COS Pro 1급",COS_PRO_2:"COS Pro 2급",COS_1:"COS 1급",COS_2:"COS 2급",SQLD:"SQLD",ADsP:"ADsP",FINAL:"기말고사",MID_TERM:"중간고사"},V=["COS_PRO_1","COS_PRO_2","COS_1","COS_2","SQLD","ADsP","FINAL","MID_TERM"],H=()=>{R.value=!0},B=()=>{R.value=!1,i.value={type:"COS_PRO_2",examDate:"",examTime:"",maxParticipants:30}},E=s=>ye(s).format("YYYY-MM-DD HH:mm"),X=b(()=>{const s={};return oe.value.forEach(l=>{var m;const t=l.examId;if(!s[t]){const O=M.value.find(de=>de.id===t);O&&(s[t]={examId:t,type:O.type,examDateTime:O.examDateTime,results:[]})}(m=s[t])==null||m.results.push(l)}),Object.values(s).filter(l=>l).sort((l,t)=>new Date(t.examDateTime)-new Date(l.examDateTime))}),L=async()=>{try{const s=await v.get("/api/exams");w.value=s.data}catch(s){console.error("예정된 시험 조회 실패:",s),u.error("예정된 시험 목록을 불러오는데 실패했습니다.")}},j=async()=>{try{const s=await v.get("/api/exams/recent-results");I.value=s.data}catch(s){console.error("시험 결과 조회 실패:",s),u.error("시험 결과를 불러오는데 실패했습니다.")}},K=async()=>{try{const s=await v.get("/api/exams/statistics");g.value=s.data}catch(s){console.error("통계 조회 실패:",s),u.error("통계 정보를 불러오는데 실패했습니다.")}},W=async()=>{try{const s=await v.post("/api/exams",{type:i.value.type,examDateTime:`${i.value.examDate}T${i.value.examTime}:00`,maxParticipants:i.value.maxParticipants});B(),u.success("시험이 성공적으로 생성되었습니다."),await L()}catch(s){console.error("시험 생성 실패:",s),u.error("시험 생성에 실패했습니다.")}};ie(async()=>{await Promise.all([L(),j(),K(),J(),ne()])});const U=b(()=>s=>({COS_PRO_1:"COS Pro 1급",COS_PRO_2:"COS Pro 2급",COS_1:"COS 1급",COS_2:"COS 2급",SQLD:"SQLD",ADsP:"ADsP",FINAL:"기말고사",MID_TERM:"중간고사"})[s]||s),k=r(!1),_=r(null),y=r(null),A=r([]),d=r({id:null,score:null,examTakenAt:"",feedback:""}),Z=b(()=>{if(!_.value||!d.value.score)return"-";const s=w.value.find(l=>l.id===_.value);return s?se(s.type,d.value.score):"-"}),N=b(()=>{if(!_.value||!d.value.score)return!1;const s=w.value.find(l=>l.id===_.value);return s?le(s.type,d.value.score):!1}),q=()=>{k.value=!0},J=async()=>{try{const s=await v.get("/api/students");A.value=s.data}catch(s){console.error("학생 목록 조회 실패:",s),u.error("학생 목록을 불러오는데 실패했습니다.")}},ee=async()=>{try{const s={examId:_.value,studentId:y.value,score:d.value.score,examTakenAt:d.value.examTakenAt,feedback:d.value.feedback};d.value.id?(await v.put(`/api/exam-results/${d.value.id}`,s),u.success("시험 결과가 수정되었습니다.")):(await v.post("/api/exam-results",s),u.success("시험 결과가 저장되었습니다.")),F(),await j()}catch(s){console.error("시험 결과 저장 실패:",s),u.error("시험 결과 저장에 실패했습니다.")}},te=s=>{_.value=s.examId,y.value=s.studentId,d.value={id:s.id,score:s.score,examTakenAt:s.examTakenAt,feedback:s.feedback},k.value=!0},F=()=>{k.value=!1,_.value=null,y.value=null,d.value={id:null,score:null,examTakenAt:"",feedback:""}},se=(s,l)=>{const t=l/100*100;return t>=90?"A":t>=80?"B":t>=70?"C":t>=60?"D":"F"},le=(s,l)=>l/100*100>=60,D=r(""),S=r(""),T=r(""),ae=b(()=>{if(!D.value)return A.value;const s=D.value.toLowerCase();return A.value.filter(l=>l.name.toLowerCase().includes(s))}),oe=b(()=>{let s=[...I.value];if(S.value){const l=S.value.toLowerCase();s=s.filter(t=>t.studentName.toLowerCase().includes(l))}return T.value&&(s=s.filter(l=>l.examType===C[T.value])),s}),M=r([]),ne=async()=>{try{const s=await v.get("/api/exams/all");M.value=s.data}catch(s){console.error("시험 목록 조회 실패:",s),u.error("시험 목록을 불러오는데 실패했습니다.")}};return(s,l)=>(a(),ce(ue,null,{default:Y(()=>[me(ge,null,{default:Y(()=>[e("div",null,[e("div",we,[e("div",Ce,[(a(),o("svg",ke,[e("path",{fill:"currentColor",d:x(_e)},null,8,De)])),Se]),e("button",{onClick:H,class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center"},[(a(),o("svg",Te,[e("path",{fill:"currentColor",d:x($)},null,8,Oe)])),Q(" 시험 추가 ")])]),R.value?(a(),o("div",Pe,[e("div",Re,[Ee,e("div",Ae,[e("div",null,[Me,c(e("select",{"onUpdate:modelValue":l[0]||(l[0]=t=>i.value.type=t),class:"w-full border rounded-lg p-2"},[(a(),o(h,null,f(V,t=>e("option",{key:t,value:t},n(U.value(t)),9,Ie)),64))],512),[[P,i.value.type]])]),e("div",null,[Ve,c(e("input",{type:"date","onUpdate:modelValue":l[1]||(l[1]=t=>i.value.examDate=t),class:"w-full border rounded-lg p-2"},null,512),[[p,i.value.examDate]])]),e("div",null,[Be,c(e("input",{type:"time","onUpdate:modelValue":l[2]||(l[2]=t=>i.value.examTime=t),class:"w-full border rounded-lg p-2"},null,512),[[p,i.value.examTime]])]),e("div",null,[Le,c(e("input",{type:"number","onUpdate:modelValue":l[3]||(l[3]=t=>i.value.maxParticipants=t),class:"w-full border rounded-lg p-2"},null,512),[[p,i.value.maxParticipants]])])]),e("div",{class:"flex justify-end space-x-2 mt-6"},[e("button",{onClick:B,class:"px-4 py-2 border rounded-lg hover:bg-gray-100"}," 취소 "),e("button",{onClick:W,class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600"}," 추가 ")])])])):z("",!0),k.value?(a(),o("div",je,[e("div",Ue,[Ne,e("div",Fe,[e("div",null,[Ye,c(e("select",{"onUpdate:modelValue":l[4]||(l[4]=t=>_.value=t),class:"w-full border rounded-lg p-2"},[(a(!0),o(h,null,f(M.value,t=>(a(),o("option",{key:t.id,value:t.id},n(C[t.type])+" ("+n(E(t.examDateTime))+") ",9,$e))),128))],512),[[P,_.value]])]),e("div",null,[Qe,e("div",ze,[c(e("input",{type:"text","onUpdate:modelValue":l[5]||(l[5]=t=>D.value=t),placeholder:"학생 이름 검색...",class:"w-full border rounded-lg p-2 mb-2"},null,512),[[p,D.value]]),c(e("select",{"onUpdate:modelValue":l[6]||(l[6]=t=>y.value=t),class:"w-full border rounded-lg p-2",size:"5"},[(a(!0),o(h,null,f(ae.value,t=>(a(),o("option",{key:t.id,value:t.id},n(t.name),9,Ge))),128))],512),[[P,y.value]])])])]),e("div",He,[e("div",null,[Xe,c(e("input",{type:"number","onUpdate:modelValue":l[7]||(l[7]=t=>d.value.score=t),class:"w-full border rounded-lg p-2",min:"0",max:"100"},null,512),[[p,d.value.score]])]),e("div",null,[Ke,c(e("input",{type:"datetime-local","onUpdate:modelValue":l[8]||(l[8]=t=>d.value.examTakenAt=t),class:"w-full border rounded-lg p-2"},null,512),[[p,d.value.examTakenAt]])]),e("div",null,[We,c(e("textarea",{"onUpdate:modelValue":l[9]||(l[9]=t=>d.value.feedback=t),rows:"3",class:"w-full border rounded-lg p-2"},null,512),[[p,d.value.feedback]])]),e("div",Ze,[e("div",qe,[e("div",null,[Je,e("span",et,n(Z.value),1)]),e("div",null,[tt,e("span",{class:G(["ml-2 font-bold",N.value?"text-green-600":"text-red-600"])},n(N.value?"합격":"불합격"),3)])])])]),e("div",{class:"flex justify-end space-x-2"},[e("button",{onClick:F,class:"px-4 py-2 border rounded-lg hover:bg-gray-100"}," 취소 "),e("button",{onClick:ee,class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600"}," 저장 ")])])])):z("",!0),e("div",st,[e("div",lt,[e("div",at,[(a(),o("svg",ot,[e("path",{fill:"currentColor",d:x(xe)},null,8,nt)])),dt]),e("div",rt,n(g.value.monthlyExams)+"건",1)]),e("div",it,[e("div",ct,[(a(),o("svg",ut,[e("path",{fill:"currentColor",d:x(ve)},null,8,mt)])),_t]),e("div",xt,n(g.value.upcomingParticipants)+"명",1)]),e("div",vt,[e("div",pt,[(a(),o("svg",ht,[e("path",{fill:"currentColor",d:x(pe)},null,8,ft)])),bt]),e("div",gt,n(g.value.monthlyPassed)+"명",1)]),e("div",yt,[e("div",wt,[(a(),o("svg",Ct,[e("path",{fill:"currentColor",d:x(he)},null,8,kt)])),Dt]),e("div",St,n(g.value.passRate)+"%",1)])]),e("div",Tt,[e("div",Ot,[(a(),o("svg",Pt,[e("path",{fill:"currentColor",d:x(fe)},null,8,Rt)])),Et]),e("ul",At,[(a(!0),o(h,null,f(w.value,t=>(a(),o("li",{key:t.id,class:"flex items-center justify-between"},[e("div",null,n(U.value(t.type))+" "+n(E(t.examDateTime)),1),e("div",Mt," 신청인원: "+n(t.currentParticipants)+"/"+n(t.maxParticipants)+"명 ",1)]))),128))])]),e("div",It,[e("div",Vt,[e("div",Bt,[(a(),o("svg",Lt,[e("path",{fill:"currentColor",d:x(be)},null,8,jt)])),Ut]),e("button",{onClick:q,class:"bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded-lg flex items-center text-sm"},[(a(),o("svg",Nt,[e("path",{fill:"currentColor",d:x($)},null,8,Ft)])),Q(" 결과 입력 ")])]),e("div",Yt,[e("div",$t,[c(e("input",{type:"text","onUpdate:modelValue":l[10]||(l[10]=t=>S.value=t),placeholder:"학생 이름으로 검색...",class:"w-full border rounded-lg p-2"},null,512),[[p,S.value]])]),e("div",Qt,[c(e("select",{"onUpdate:modelValue":l[11]||(l[11]=t=>T.value=t),class:"w-full border rounded-lg p-2"},[zt,(a(),o(h,null,f(V,t=>e("option",{key:t,value:t},n(C[t]),9,Gt)),64))],512),[[P,T.value]])])]),(a(!0),o(h,null,f(X.value,t=>(a(),o("div",{key:t.examId},[e("div",Ht,n(C[t.type])+" ("+n(E(t.examDateTime))+") ",1),e("table",Xt,[Kt,e("tbody",null,[(a(!0),o(h,null,f(t.results,m=>(a(),o("tr",{key:m.id,class:"border-b"},[e("td",Wt,n(m.studentName),1),e("td",Zt,n(m.score),1),e("td",qt,n(m.grade),1),e("td",{class:G(["p-2",m.passed?"text-green-600":"text-red-600"])},n(m.passed?"합격":"불합격"),3),e("td",Jt,[e("button",{onClick:O=>te(m),class:"text-blue-500 hover:text-blue-700"}," 수정 ",8,es)])]))),128))])])]))),128))])])]),_:1})]),_:1}))}};export{as as default};
