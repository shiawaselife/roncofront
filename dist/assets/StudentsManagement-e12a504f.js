import{j as le,r as d,v as g,N as x,x as O,k as re,s as k,c as de,w as Y,L as ie,y as ue,o,a as ce,b as e,d as n,u as v,O as pe,E as f,G as R,P as ge,J as c,n as C,t as l,Q as xe,C as A,F as S,R as ve,S as me,I as E,T as ye,M as fe,K as F,_ as be}from"./index-5d7e744c.js";const _e={class:"flex gap-6"},he={class:"w-1/3 space-y-4"},we={class:"bg-white rounded-xl shadow-sm p-4"},ke={class:"flex items-center justify-between mb-6"},Ce={class:"flex items-center gap-2"},Se={class:"w-6 h-6 text-indigo-600",viewBox:"0 0 24 24"},De=["d"],Me={class:"relative flex-1 mx-4"},Pe={class:"w-4 h-4",viewBox:"0 0 24 24"},Be=["d"],Te={class:"space-y-3"},Oe=["onClick"],Re={class:"flex justify-between items-start mb-2"},je={class:"font-semibold text-gray-900"},Ve=["onClick"],$e={class:"text-sm text-gray-600"},Le={key:0,class:"flex justify-between items-center pt-4 border-t border-gray-200"},Ne=["disabled"],Ue={class:"text-sm text-gray-600"},Ye=["disabled"],Ae={class:"flex-1 space-y-6"},Ee={class:"bg-white rounded-xl shadow-sm p-6"},Fe={class:"flex items-center gap-2 mb-6"},Ie={class:"w-6 h-6 text-gray-900",viewBox:"0 0 24 24"},Qe=["d"],We={key:0,class:"grid grid-cols-2 gap-6"},qe={class:"mt-1 font-semibold text-gray-900"},ze={class:"mt-1 text-gray-900"},Ge={class:"mt-1 text-gray-900"},He={class:"mt-1 text-gray-900"},Je={class:"bg-white rounded-xl shadow-sm p-6"},Ke={class:"flex items-center gap-2 mb-6"},Xe={class:"w-6 h-6 text-blue-600",viewBox:"0 0 24 24"},Ze=["d"],et={key:0},tt={class:"flex items-center gap-4 mb-6"},st={class:"flex items-center gap-2"},at={class:"flex items-center gap-2"},ot={class:"grid grid-cols-3 gap-4 mb-6"},nt={class:"p-4 rounded-lg bg-green-50 border border-green-100"},lt={class:"text-2xl font-semibold text-green-600"},rt={class:"p-4 rounded-lg bg-red-50 border border-red-100"},dt={class:"text-2xl font-semibold text-red-600"},it={class:"p-4 rounded-lg bg-purple-50 border border-purple-100"},ut={class:"text-2xl font-semibold text-purple-600"},ct={class:"overflow-hidden rounded-lg border border-gray-200"},pt={class:"min-w-full divide-y divide-gray-200"},gt={class:"bg-white divide-y divide-gray-200"},xt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},vt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},mt={class:"px-6 py-4 whitespace-nowrap text-sm"},yt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ft={key:0},bt={class:"bg-white rounded-xl shadow-sm p-6"},_t={class:"flex items-center gap-2 mb-6"},ht={class:"w-6 h-6 text-green-600",viewBox:"0 0 24 24"},wt=["d"],kt={key:0,class:"space-y-6"},Ct={class:"flex justify-between mb-2"},St={class:"text-sm font-medium text-gray-700"},Dt={class:"w-full bg-gray-200 rounded-full h-2.5"},Mt={class:"bg-white rounded-xl shadow-sm p-6"},Pt={class:"flex items-center gap-2 mb-6"},Bt={class:"w-6 h-6 text-purple-600",viewBox:"0 0 24 24"},Tt=["d"],Ot={class:"flex gap-4 mb-6"},Rt={class:"space-y-3"},jt={class:"flex justify-between items-center"},Vt={class:"text-sm text-gray-900"},$t={class:"text-sm text-gray-600"},Lt={key:0,class:"text-xs text-gray-500 mt-1"},Nt={key:0,class:"text-center py-6 text-gray-500"},j=5,Ut={__name:"StudentsManagement",setup(Yt){const I={mon:"월요일",tue:"화요일",wed:"수요일",thu:"목요일",fri:"금요일",sat:"토요일",sun:"일요일"},D=d([]),r=d(null),p=d(""),M=d(null),V=ue(),$=g(()=>{if(!p.value)return D.value;const a=p.value.toLowerCase();return D.value.filter(t=>t.name.toLowerCase().includes(a))});function Q(a){r.value=a,B(a.id),U(a.id)}function W(a){V.push({name:"studentInfo",params:{id:a}})}function q(){V.push("/forms")}function z(){M.value&&clearTimeout(M.value),M.value=setTimeout(()=>{},300)}function G(){p.value=""}const m=d(x().year()),y=d(x().month()+1),b=d([]),P=d([]);function L(a){return a?x(a).format("YYYY-MM-DD"):"-"}function H(a){if(!a)return"-";const t=["일","월","화","수","목","금","토"],s=x(a).day();return t[s]+"요일"}function J(a){return a.type==="absence"?"결석":a.makeup?"보강":"출석"}function K(a){return a.type==="absence"?"bg-red-100 text-red-800":a.makeup?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}function X(a){return{Python:"bg-blue-500","COS Pro":"bg-green-500",타자연습:"bg-purple-500"}[a]||"bg-gray-500"}const N=g(()=>[...b.value.map(t=>({...t,type:"attendance"})),...P.value.map(t=>({...t,type:"absence"}))].sort((t,s)=>{const u=x(t.type==="absence"?t.absenceDate:t.attendanceDate);return x(s.type==="absence"?s.absenceDate:s.attendanceDate).valueOf()-u.valueOf()})),Z=g(()=>b.value.filter(a=>!a.makeup).length),ee=g(()=>P.value.length),te=g(()=>b.value.filter(a=>a.makeup).length);async function B(a){if(a)try{const t=await k.get(`/api/attendance/student/${a}`,{params:{year:m.value,month:y.value}});b.value=t.data;const s=await k.get(`/api/absence/${a}`,{params:{year:m.value,month:y.value}});P.value=s.data}catch(t){console.error("학생 출결 데이터 조회 실패:",t),alert("학생 출결 데이터 조회 실패")}}const _=d("month"),h=d("desc"),T=d([]);O([_,h],()=>{r.value&&U(r.value.id)}),O([m,y],()=>{r.value&&B(r.value.id)});async function U(a){if(a)try{const t=await k.get(`/api/attendance/makeup/student/${a}`,{params:{range:_.value,order:h.value}});T.value=t.data}catch(t){console.error("보강 목록 조회 실패:",t),alert("보강 목록 조회 실패")}}re(()=>{se()});async function se(){try{const a=await k.get("/api/students");D.value=a.data}catch(a){console.error("학생 목록 불러오기 실패:",a),alert("학생 목록 불러오기 실패")}}const i=d(1),ae=g(()=>{const a=(i.value-1)*j,t=a+j;return $.value.slice(a,t)}),w=g(()=>Math.ceil($.value.length/j));function oe(){i.value>1&&i.value--}function ne(){i.value<w.value&&i.value++}return O(p,()=>{i.value=1}),(a,t)=>(o(),de(ie,null,{default:Y(()=>[ce(be,null,{default:Y(()=>[e("div",_e,[e("div",he,[e("div",we,[e("div",ke,[e("div",Ce,[(o(),n("svg",Se,[e("path",{fill:"currentColor",d:v(pe)},null,8,De)])),t[6]||(t[6]=e("h1",{class:"text-xl font-semibold text-gray-900"},"학생 관리",-1))]),e("div",Me,[f(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>p.value=s),placeholder:"학생 이름 검색...",class:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",onInput:z},null,544),[[R,p.value]]),p.value?(o(),n("button",{key:0,onClick:G,class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[(o(),n("svg",Pe,[e("path",{fill:"currentColor",d:v(ge)},null,8,Be)]))])):c("",!0)]),e("button",{class:"inline-flex items-center justify-center px-3 py-1 border border-indigo-600 rounded-lg text-indigo-600 hover:bg-indigo-50 transition-colors",onClick:q}," + ")]),e("div",Te,[(o(!0),n(S,null,C(ae.value,s=>(o(),n("div",{key:s.id,class:"p-4 bg-white border border-gray-200 rounded-lg hover:border-indigo-500 transition-colors shadow-sm cursor-pointer",onClick:u=>Q(s)},[e("div",Re,[e("div",je,l(s.name),1),e("button",{class:"px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded hover:bg-gray-200",onClick:xe(u=>W(s.id),["stop"])}," 수정 ",8,Ve)]),e("div",$e,[A(" ID : "+l(s.id)+" ",1),t[7]||(t[7]=e("br",null,null,-1)),A(" "+l(s.daysOfWeek.map(u=>I[u]).join(", ")),1)])],8,Oe))),128)),w.value>1?(o(),n("div",Le,[e("button",{class:"px-3 py-1 rounded text-sm text-gray-600 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",disabled:i.value===1,onClick:oe}," 이전 ",8,Ne),e("span",Ue,l(i.value)+" / "+l(w.value),1),e("button",{class:"px-3 py-1 rounded text-sm text-gray-600 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",disabled:i.value===w.value,onClick:ne}," 다음 ",8,Ye)])):c("",!0)])])]),e("div",Ae,[e("div",Ee,[e("div",Fe,[(o(),n("svg",Ie,[e("path",{fill:"currentColor",d:v(ve)},null,8,Qe)])),t[8]||(t[8]=e("h2",{class:"text-xl font-semibold text-gray-900"},"기본 정보",-1))]),r.value?(o(),n("div",We,[e("div",null,[t[9]||(t[9]=e("label",{class:"text-sm font-medium text-gray-600"},"이름",-1)),e("p",qe,l(r.value.name),1)]),e("div",null,[t[10]||(t[10]=e("label",{class:"text-sm font-medium text-gray-600"},"연락처",-1)),e("p",ze,l(r.value.phone),1)]),e("div",null,[t[11]||(t[11]=e("label",{class:"text-sm font-medium text-gray-600"},"보호자 연락처",-1)),e("p",Ge,l(r.value.parent),1)]),e("div",null,[t[12]||(t[12]=e("label",{class:"text-sm font-medium text-gray-600"},"생년월일",-1)),e("p",He,l(r.value.birthday),1)])])):c("",!0)]),e("div",Je,[e("div",Ke,[(o(),n("svg",Xe,[e("path",{fill:"currentColor",d:v(me)},null,8,Ze)])),t[13]||(t[13]=e("h2",{class:"text-xl font-semibold text-gray-900"},"출결 현황",-1))]),r.value?(o(),n("div",et,[e("div",tt,[e("label",st,[t[14]||(t[14]=e("span",{class:"text-sm font-medium text-gray-600"},"연도:",-1)),f(e("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=s=>m.value=s),class:"px-3 py-1 border border-gray-200 rounded-lg text-sm w-24 focus:ring-2 focus:ring-indigo-500"},null,512),[[R,m.value]])]),e("label",at,[t[15]||(t[15]=e("span",{class:"text-sm font-medium text-gray-600"},"월:",-1)),f(e("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=s=>y.value=s),class:"px-3 py-1 border border-gray-200 rounded-lg text-sm w-20 focus:ring-2 focus:ring-indigo-500",min:"1",max:"12"},null,512),[[R,y.value]])]),e("button",{class:"px-4 py-1 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-sm transition-colors",onClick:t[3]||(t[3]=s=>B(r.value.id))}," 조회 ")]),e("div",ot,[e("div",nt,[t[16]||(t[16]=e("div",{class:"text-sm text-gray-600"},"출석",-1)),e("div",lt,l(Z.value),1)]),e("div",rt,[t[17]||(t[17]=e("div",{class:"text-sm text-gray-600"},"결석",-1)),e("div",dt,l(ee.value),1)]),e("div",it,[t[18]||(t[18]=e("div",{class:"text-sm text-gray-600"},"보강",-1)),e("div",ut,l(te.value),1)])]),e("div",ct,[e("table",pt,[t[20]||(t[20]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"날짜"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"요일"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"상태"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"시간")])],-1)),e("tbody",gt,[(o(!0),n(S,null,C(N.value,s=>(o(),n("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",xt,l(L(s.type==="absence"?s.absenceDate:s.attendanceDate)),1),e("td",vt,l(H(s.type==="absence"?s.absenceDate:s.attendanceDate)),1),e("td",mt,[e("span",{class:E(["px-2 py-1 rounded-full text-xs font-medium",K(s)])},l(J(s)),3)]),e("td",yt,l(s.type==="absence"?"-":`${s.startTime||"-"} ~ ${s.endTime||"-"}`),1)]))),128)),N.value.length===0?(o(),n("tr",ft,t[19]||(t[19]=[e("td",{colspan:"4",class:"px-6 py-4 text-center text-sm text-gray-500"}," 해당 기간에 출결 기록이 없습니다. ",-1)]))):c("",!0)])])])])):c("",!0)]),e("div",bt,[e("div",_t,[(o(),n("svg",ht,[e("path",{fill:"currentColor",d:v(ye)},null,8,wt)])),t[21]||(t[21]=e("h2",{class:"text-xl font-semibold text-gray-900"},"학습 현황",-1))]),r.value?(o(),n("div",kt,[(o(),n(S,null,C(["Python","COS Pro","타자연습"],(s,u)=>e("div",{key:u},[e("div",Ct,[e("span",St,l(u),1),t[22]||(t[22]=e("span",{class:"text-sm font-medium text-gray-700"},"50%",-1))]),e("div",Dt,[e("div",{class:E(["h-2.5 rounded-full transition-all duration-300",X(u)]),style:{width:"50%"}},null,2)])])),64))])):c("",!0)]),e("div",Mt,[e("div",Pt,[(o(),n("svg",Bt,[e("path",{fill:"currentColor",d:v(fe)},null,8,Tt)])),t[23]||(t[23]=e("h2",{class:"text-xl font-semibold text-gray-900"},"보강 목록",-1))]),e("div",Ot,[f(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>_.value=s),class:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500"},t[24]||(t[24]=[e("option",{value:"week"},"주간",-1),e("option",{value:"month"},"월간",-1),e("option",{value:"all"},"전체",-1)]),512),[[F,_.value]]),f(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>h.value=s),class:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500"},t[25]||(t[25]=[e("option",{value:"asc"},"오름차순",-1),e("option",{value:"desc"},"내림차순",-1)]),512),[[F,h.value]])]),e("div",Rt,[(o(!0),n(S,null,C(T.value,s=>(o(),n("div",{key:s.id,class:"p-4 bg-gray-50 rounded-lg border border-gray-200"},[e("div",jt,[e("div",null,[e("div",Vt,l(L(s.attendanceDate)),1),e("div",$t,l(s.startTime||"-")+" ~ "+l(s.endTime||"-"),1),s.makeupType?(o(),n("div",Lt,l(s.makeupType),1)):c("",!0)]),t[26]||(t[26]=e("span",{class:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm font-medium"}," 보강 ",-1))])]))),128)),T.value.length===0?(o(),n("div",Nt," 보강 기록이 없습니다. ")):c("",!0)])])])])]),_:1})]),_:1}))}},Ft=le(Ut,[["__scopeId","data-v-9bd1ac66"]]);export{Ft as default};
