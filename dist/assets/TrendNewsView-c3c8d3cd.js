import{x as N,r as h,y as S,n as A,c as O,w as x,_ as U,o as d,a as E,b as e,I as K,O as B,aa as F,t as u,K as _,d as p,F as b,p as v,D as q,j as R}from"./index-bd052fb4.js";const j="9af9e3432d304de6b3274ac8e8a9a160",w=N.create({baseURL:"https://newsapi.org/v2",params:{apiKey:j}});class M{async getKoreanTechNews(){try{return(await w.get("/everything",{params:{q:"(IT OR 테크 OR 기술 OR AI OR 인공지능 OR 개발)",language:"ko",sortBy:"publishedAt",pageSize:30,domains:"zdnet.co.kr,etnews.com,bloter.net,aitimes.com,venture.co.kr"}})).data.articles.map(t=>({id:t.url,title:t.title,description:t.description||"내용이 없습니다.",category:{name:this.getCategoryFromTitle(t.title),type:"tech"},timestamp:t.publishedAt,externalUrl:t.url,source:t.source.name,imageUrl:t.urlToImage}))}catch(r){return console.error("Error fetching Korean tech news:",r),[]}}async getNaverNews(){try{const r=new Date,s=new Date(r.getTime()-7*24*60*60*1e3).toISOString().split("T")[0],i=r.toISOString().split("T")[0];return(await N.get("/v1/search/news.json",{headers:{"X-Naver-Client-Id":"D09FBOxISDaoDhEVqfPj","X-Naver-Client-Secret":"C3FN8ediq6"},params:{query:"IT/과학",sort:"date",display:100,start:1,pd:1,ds:s,de:i}})).data.items.map(l=>({id:l.link,title:l.title.replace(/(<([^>]+)>)/gi,""),description:l.description.replace(/(<([^>]+)>)/gi,""),category:{name:this.getCategoryFromTitle(l.title),type:"tech"},timestamp:new Date(l.pubDate),externalUrl:l.link,source:l.source}))}catch(r){return console.error("Error fetching Naver news:",r),[]}}getCategoryFromTitle(r){const t={AI:["AI","인공지능","머신러닝","딥러닝"],블록체인:["블록체인","암호화폐","비트코인","이더리움"],모바일:["모바일","스마트폰","애플","안드로이드"],개발:["개발","프로그래밍","코딩","소프트웨어"],IT비즈니스:["스타트업","투자","실적","매출"],보안:["보안","해킹","사이버","악성코드"]};for(const[s,i]of Object.entries(t))if(i.some(c=>r.includes(c)))return s;return"IT/기술"}async getAllNews(){try{const[r,t]=await Promise.all([[],this.getNaverNews()]),s=[...r,...t];return Array.from(new Map(s.map(c=>[c.id,c])).values()).sort((c,l)=>new Date(l.timestamp)-new Date(c.timestamp))}catch(r){throw console.error("Error fetching all news:",r),r}}async searchNews(r){try{return(await w.get("/everything",{params:{q:r,language:"ko",sortBy:"publishedAt",pageSize:20,domains:"zdnet.co.kr,etnews.com,bloter.net,aitimes.com,venture.co.kr"}})).data.articles.map(s=>({id:s.url,title:s.title,description:s.description||"내용이 없습니다.",category:{name:this.getCategoryFromTitle(s.title),type:"tech"},timestamp:s.publishedAt,externalUrl:s.url,source:s.source.name,imageUrl:s.urlToImage}))}catch(t){throw console.error("Error searching news:",t),t}}}const k=new M,V={class:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8"},$={class:"max-w-6xl mx-auto"},z={class:"bg-white rounded-2xl shadow-sm overflow-hidden"},L={class:"border-b border-gray-100"},P={class:"px-6 py-5 bg-gradient-to-r from-blue-50 to-indigo-50"},W={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},X=e("h2",{class:"text-2xl font-bold text-gray-800"},"트렌드/뉴스",-1),H={class:"flex flex-col sm:flex-row items-start sm:items-center gap-4 w-full sm:w-auto"},Y={class:"relative w-full sm:w-64"},G=["onKeyup"],J=e("i",{class:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"},null,-1),Q={class:"flex items-center gap-3"},Z={class:"text-sm text-gray-500"},ee=["disabled"],te={class:"px-6 py-6"},se={key:0,class:"flex justify-center items-center py-20"},re=e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"},null,-1),ae=[re],oe={key:1,class:"text-center py-20"},ne={class:"text-red-500 mb-4"},le={key:2,class:"space-y-8"},ie={class:"flex flex-wrap items-center gap-2 mb-3"},ce={class:"text-sm text-gray-500"},de={class:"text-xl font-semibold mb-3 group-hover:text-blue-600 transition-colors"},ue=["href"],pe=e("i",{class:"fas fa-external-link-alt text-gray-400 text-sm transition-colors group-hover:text-blue-500"},null,-1),ge={class:"text-gray-600 leading-relaxed mb-4"},me={class:"flex items-center gap-4"},he=["onClick"],ye=e("i",{class:"fas fa-bookmark"},null,-1),_e=e("span",{class:"text-sm"},"북마크",-1),fe=[ye,_e],xe=["onClick"],be=e("i",{class:"fas fa-share-alt"},null,-1),ve=e("span",{class:"text-sm"},"공유",-1),we=[be,ve],Te={__name:"TrendNewsView",setup(T){const r=h([]),t=h(!1),s=h(null),i=h(""),c=S(()=>new Date().toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})),l=a=>{const n=new Date,o=new Date(a),g=Math.abs(n-o),m=Math.floor(g/(1e3*60*60));return m<1?"방금 전":m<24?`${m}시간 전`:`${Math.floor(m/24)}일 전`},y=async()=>{t.value=!0,s.value=null;try{const a=await k.getAllNews();r.value=a.map(n=>({...n,time:l(n.timestamp),tags:[n.source],bookmarked:!1}))}catch(a){s.value="뉴스를 불러오는데 실패했습니다",console.error(a)}finally{t.value=!1}},D=async()=>{if(!i.value.trim())return y();t.value=!0,s.value=null;try{const a=await k.searchNews(i.value);r.value=a.map(n=>({...n,time:l(n.timestamp),tags:[n.source],bookmarked:!1}))}catch(a){s.value="검색에 실패했습니다",console.error(a)}finally{t.value=!1}},I=a=>{a.bookmarked=!a.bookmarked},C=async a=>{try{navigator.share?await navigator.share({title:a.title,text:a.description,url:a.externalUrl}):(await navigator.clipboard.writeText(a.externalUrl),alert("링크가 클립보드에 복사되었습니다."))}catch(n){console.error("Error sharing news:",n)}},f=()=>{y()};return A(()=>{y()}),(a,n)=>(d(),O(U,null,{default:x(()=>[E(R,null,{default:x(()=>[e("div",V,[e("div",$,[e("div",z,[e("div",L,[e("div",P,[e("div",W,[X,e("div",H,[e("div",Y,[K(e("input",{"onUpdate:modelValue":n[0]||(n[0]=o=>i.value=o),type:"text",placeholder:"뉴스 검색...",class:"w-full pl-10 pr-4 py-2.5 bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",onKeyup:F(D,["enter"])},null,40,G),[[B,i.value]]),J]),e("div",Q,[e("span",Z,u(c.value)+" 업데이트",1),e("button",{class:"p-2 hover:bg-gray-100 rounded-full transition-colors disabled:opacity-50",onClick:f,disabled:t.value},[e("i",{class:_(["fas fa-sync",{"animate-spin":t.value}])},null,2)],8,ee)])])])])]),e("div",te,[t.value?(d(),p("div",se,ae)):s.value?(d(),p("div",oe,[e("p",ne,u(s.value),1),e("button",{onClick:f,class:"px-6 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"}," 다시 시도 ")])):(d(),p("div",le,[(d(!0),p(b,null,v(r.value,o=>(d(),p("div",{key:o.id,class:"group p-6 bg-white rounded-xl border border-gray-100 hover:border-blue-100 hover:shadow-md transition-all duration-200"},[e("div",ie,[e("span",{class:_(["px-3 py-1.5 rounded-full text-sm font-medium",o.category.type==="tech"?"bg-blue-100 text-blue-700":"",o.category.type==="science"?"bg-green-100 text-green-700":"",o.category.type==="education"?"bg-purple-100 text-purple-700":""])},u(o.category.name),3),(d(!0),p(b,null,v(o.tags,g=>(d(),p("span",{key:g,class:"px-3 py-1.5 bg-gray-100 text-gray-600 rounded-full text-sm"},u(g),1))),128)),e("span",ce,u(o.time),1)]),e("h3",de,[e("a",{href:o.externalUrl,target:"_blank",class:"flex items-center gap-2"},[q(u(o.title)+" ",1),pe],8,ue)]),e("p",ge,u(o.description),1),e("div",me,[e("button",{onClick:g=>I(o),class:_(["flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-gray-100 transition-colors",o.bookmarked?"text-yellow-500":"text-gray-500"])},fe,10,he),e("button",{onClick:g=>C(o),class:"flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-gray-100 transition-colors text-gray-500"},we,8,xe)])]))),128))]))])])])])]),_:1})]),_:1}))}};export{Te as default};
