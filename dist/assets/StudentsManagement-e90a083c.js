import{k as te,r as c,M as se,x as k,y as j,n as oe,v as T,c as le,w as Y,_ as ae,o as l,a as ne,b as e,d as a,u as v,N as de,C as m,L as V,O as ie,I as h,p as D,P as ce,t as n,H as C,F as O,Q as re,R as ue,S as _e,J as ve,K as H,j as he,q as me,s as pe}from"./index-a961658a.js";import{d as p}from"./dayjs.min-91b9ea6a.js";const d=x=>(me("data-v-cec6bd2d"),x=x(),pe(),x),xe={class:"flex gap-6"},ge={class:"w-1/3"},be={class:"flex items-center mb-4 justify-between"},fe={class:"flex items-center"},ye={class:"w-6 h-6 mr-2 text-indigo-500",viewBox:"0 0 24 24"},we=["d"],ke=d(()=>e("h1",{class:"text-xl font-bold"},"학생 관리",-1)),Ce={class:"relative flex-1 mx-4"},Se={class:"w-4 h-4",viewBox:"0 0 24 24"},Me=["d"],Be={class:"space-y-3"},Pe=["onClick"],je=["onClick"],Te={class:"font-bold"},Ve={class:"text-sm text-gray-600"},De=d(()=>e("br",null,null,-1)),Oe={key:0,class:"text-center py-4 text-gray-500"},Ie={key:1,class:"flex justify-between items-center pt-4 border-t"},Le=["disabled"],$e={class:"text-sm text-gray-600"},Ae=["disabled"],Ne={class:"flex-1"},Ue={class:"bg-white p-4 rounded shadow mb-4"},Ye={class:"flex items-center mb-2"},He={class:"w-5 h-5 mr-2 text-gray-600",viewBox:"0 0 24 24"},Re=["d"],Fe=d(()=>e("h2",{class:"text-lg font-semibold"},"기본 정보",-1)),qe={key:0},Ee={class:"grid grid-cols-2 gap-4 mb-4"},Qe=d(()=>e("div",{class:"text-sm text-gray-500"},"이름",-1)),We={class:"font-bold"},Je=d(()=>e("div",{class:"text-sm text-gray-500"},"연락처",-1)),Ke=d(()=>e("div",{class:"text-sm text-gray-500"},"보호자 연락처",-1)),ze=d(()=>e("div",{class:"text-sm text-gray-500"},"생년월일",-1)),Ge=d(()=>e("div",{class:"text-sm text-gray-500"},"등록일",-1)),Xe=d(()=>e("div",{class:"text-sm text-gray-500"},"주소",-1)),Ze={class:"bg-white p-4 rounded shadow mb-4"},et={class:"flex items-center mb-4"},tt={class:"w-5 h-5 mr-2 text-blue-500",viewBox:"0 0 24 24"},st=["d"],ot=d(()=>e("h2",{class:"text-lg font-semibold"},"출결 현황",-1)),lt={key:0},at={class:"flex items-center space-x-2 mb-4"},nt={class:"text-sm"},dt={class:"text-sm"},it={class:"overflow-x-auto"},ct={class:"w-full border-collapse text-sm"},rt=d(()=>e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"border p-2 text-center"},"날짜"),e("th",{class:"border p-2 text-center"},"요일"),e("th",{class:"border p-2 text-center"},"등원시간")])],-1)),ut={class:"border p-2 text-center"},_t={class:"border p-2 text-center"},vt={class:"border p-2 text-center"},ht={class:"bg-white p-4 rounded shadow mb-4"},mt={class:"flex items-center mb-2"},pt={class:"w-5 h-5 mr-2 text-green-500",viewBox:"0 0 24 24"},xt=["d"],gt=d(()=>e("h2",{class:"text-lg font-semibold"},"학습 현황",-1)),bt={key:0},ft=d(()=>e("ul",{class:"space-y-4"},[e("li",null,[e("div",{class:"flex items-center justify-between"},[e("span",null,"Python"),e("span",null,"50%")]),e("div",{class:"w-full h-2 bg-gray-200 rounded"},[e("div",{class:"h-2 bg-blue-500 rounded",style:{width:"50%"}})])]),e("li",null,[e("div",{class:"flex items-center justify-between"},[e("span",null,"COS Pro"),e("span",null,"70%")]),e("div",{class:"w-full h-2 bg-gray-200 rounded"},[e("div",{class:"h-2 bg-green-500 rounded",style:{width:"70%"}})])]),e("li",null,[e("div",{class:"flex items-center justify-between"},[e("span",null,"타자연습"),e("span",null,"40%")]),e("div",{class:"w-full h-2 bg-gray-200 rounded"},[e("div",{class:"h-2 bg-purple-500 rounded",style:{width:"40%"}})])])],-1)),yt=[ft],wt={class:"bg-white p-4 rounded shadow"},kt={class:"flex items-center mb-2"},Ct={class:"w-5 h-5 mr-2 text-gray-500",viewBox:"0 0 24 24"},St=["d"],Mt=d(()=>e("h2",{class:"text-lg font-semibold"},"보강 목록",-1)),Bt={class:"flex items-center mb-2 space-x-2"},Pt=d(()=>e("option",{value:"week"},"주간",-1)),jt=d(()=>e("option",{value:"month"},"월간",-1)),Tt=[Pt,jt],Vt=d(()=>e("option",{value:"asc"},"오름차순",-1)),Dt=d(()=>e("option",{value:"desc"},"내림차순",-1)),Ot=[Vt,Dt],It={key:0,class:"text-sm text-gray-500"},Lt={key:1,class:"space-y-2"},$t={class:"font-bold"},At={class:"text-sm text-gray-600"},Nt=d(()=>e("div",{class:"text-green-600 font-semibold"},"보강",-1)),I=6,Ut={__name:"StudentsManagement",setup(x){const R={mon:"월요일",tue:"화요일",wed:"수요일",thu:"목요일",fri:"금요일",sat:"토요일",sun:"일요일"},S=c([]),i=c(null),u=c(""),M=c(null),L=se(),B=k(()=>{if(!u.value)return S.value;const s=u.value.toLowerCase();return S.value.filter(o=>o.name.toLowerCase().includes(s))});function F(s){i.value=s,P(s.id),N(s.id)}function q(s){L.push({name:"studentInfo",params:{id:s}})}function E(){L.push("/forms")}function Q(){M.value&&clearTimeout(M.value),M.value=setTimeout(()=>{},300)}function W(){u.value=""}const g=c(p().year()),b=c(p().month()+1),$=c([]);function J(s){return p(s).format("YYYY-MM-DD")}function K(s){const o=["일","월","화","수","목","금","토"],t=p(s).day();return o[t]+"요일"}function z(s){return s?p(s).format("HH:mm"):"-"}async function P(s){if(s)try{const o=await T.get(`/api/attendance/${s}`,{params:{year:g.value,month:b.value}});$.value=o.data}catch(o){console.error(o),alert("학생 출결 데이터 조회 실패")}}const f=c("week"),y=c("asc"),A=c([]);j([f,y],()=>{i.value&&N(i.value.id)}),j([g,b],()=>{i.value&&P(i.value.id)});async function N(s){if(s)try{const o=await T.get("/api/classes/makeup",{params:{range:f.value,order:y.value}});A.value=o.data}catch(o){console.error(o),alert("보강 목록 조회 실패")}}oe(()=>{G()});async function G(){try{const s=await T.get("/api/students");S.value=s.data}catch(s){console.error(s),alert("학생 목록 불러오기 실패")}}const r=c(1),X=k(()=>{const s=(r.value-1)*I,o=s+I;return B.value.slice(s,o)}),w=k(()=>Math.ceil(B.value.length/I));function Z(){r.value>1&&r.value--}function ee(){r.value<w.value&&r.value++}j(u,()=>{r.value=1});const U=k(()=>i.value?A.value.filter(s=>{var o;return((o=s.student)==null?void 0:o.id)===i.value.id}):[]);return(s,o)=>(l(),le(ae,null,{default:Y(()=>[ne(he,null,{default:Y(()=>[e("div",xe,[e("div",ge,[e("div",be,[e("div",fe,[(l(),a("svg",ye,[e("path",{fill:"currentColor",d:v(de)},null,8,we)])),ke]),e("div",Ce,[m(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=t=>u.value=t),placeholder:"학생 이름 검색...",class:"w-full px-3 py-1 border rounded-lg text-sm",onInput:Q},null,544),[[V,u.value]]),u.value?(l(),a("button",{key:0,onClick:W,class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[(l(),a("svg",Se,[e("path",{fill:"currentColor",d:v(ie)},null,8,Me)]))])):h("",!0)]),e("button",{class:"border border-blue-500 text-blue-500 hover:bg-blue-100 px-2 py-1 rounded text-sm",onClick:E}," + ")]),e("div",Be,[(l(!0),a(O,null,D(X.value,t=>(l(),a("div",{key:t.id,class:"relative bg-white p-4 rounded shadow hover:bg-gray-50 cursor-pointer",onClick:_=>F(t)},[e("button",{class:"absolute top-2 right-2 bg-gray-100 hover:bg-gray-200 text-sm text-gray-700 px-2 py-1 rounded",onClick:ce(_=>q(t.id),["stop"])}," 수정 ",8,je),e("div",Te,n(t.name),1),e("div",Ve,[C(n(t.daysOfWeek.map(_=>R[_]).join(", "))+" ",1),De,C(" 수업 시간 : "+n(t.startTime)+" ~ "+n(t.endTime),1)])],8,Pe))),128)),B.value.length===0?(l(),a("div",Oe," 검색 결과가 없습니다 ")):h("",!0),w.value>1?(l(),a("div",Ie,[e("button",{class:"px-3 py-1 rounded text-sm text-gray-600 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",disabled:r.value===1,onClick:Z}," 이전 ",8,Le),e("span",$e,n(r.value)+" / "+n(w.value),1),e("button",{class:"px-3 py-1 rounded text-sm text-gray-600 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",disabled:r.value===w.value,onClick:ee}," 다음 ",8,Ae)])):h("",!0)])]),e("div",Ne,[e("div",Ue,[e("div",Ye,[(l(),a("svg",He,[e("path",{fill:"currentColor",d:v(re)},null,8,Re)])),Fe]),i.value?(l(),a("div",qe,[e("div",Ee,[e("div",null,[Qe,e("div",We,n(i.value.name),1)]),e("div",null,[Je,e("div",null,n(i.value.phone),1)]),e("div",null,[Ke,e("div",null,n(i.value.parent),1)]),e("div",null,[ze,e("div",null,n(i.value.birthday),1)]),e("div",null,[Ge,e("div",null,n(i.value.regDate),1)]),e("div",null,[Xe,e("div",null,n(i.value.residence),1)])])])):h("",!0)]),e("div",Ze,[e("div",et,[(l(),a("svg",tt,[e("path",{fill:"currentColor",d:v(ue)},null,8,st)])),ot]),i.value?(l(),a("div",lt,[e("div",at,[e("label",nt,[C(" 연도: "),m(e("input",{type:"number",class:"border p-1 text-sm w-20","onUpdate:modelValue":o[1]||(o[1]=t=>g.value=t)},null,512),[[V,g.value]])]),e("label",dt,[C(" 월: "),m(e("input",{type:"number",class:"border p-1 text-sm w-14","onUpdate:modelValue":o[2]||(o[2]=t=>b.value=t),min:"1",max:"12"},null,512),[[V,b.value]])]),e("button",{class:"bg-gray-200 hover:bg-gray-300 px-3 py-1 rounded text-sm",onClick:o[3]||(o[3]=t=>P(i.value.id))}," 조회 ")]),e("div",it,[e("table",ct,[rt,e("tbody",null,[(l(!0),a(O,null,D($.value,t=>(l(),a("tr",{key:t.id,class:"hover:bg-gray-50"},[e("td",ut,n(J(t.date)),1),e("td",_t,n(K(t.date)),1),e("td",vt,n(z(t.createdAt)),1)]))),128))])])])])):h("",!0)]),e("div",ht,[e("div",mt,[(l(),a("svg",pt,[e("path",{fill:"currentColor",d:v(_e)},null,8,xt)])),gt]),i.value?(l(),a("div",bt,yt)):h("",!0)]),e("div",wt,[e("div",kt,[(l(),a("svg",Ct,[e("path",{fill:"currentColor",d:v(ve)},null,8,St)])),Mt]),e("div",Bt,[m(e("select",{class:"border p-1 text-sm rounded","onUpdate:modelValue":o[4]||(o[4]=t=>f.value=t)},Tt,512),[[H,f.value]]),m(e("select",{class:"border p-1 text-sm rounded","onUpdate:modelValue":o[5]||(o[5]=t=>y.value=t)},Ot,512),[[H,y.value]])]),U.value.length===0?(l(),a("div",It," 보강 수업이 없습니다. ")):(l(),a("ul",Lt,[(l(!0),a(O,null,D(U.value,t=>{var _;return l(),a("li",{key:t.id,class:"flex items-center justify-between bg-gray-50 p-2 rounded"},[e("div",null,[e("div",$t,n((_=t.student)==null?void 0:_.name),1),e("div",At,n(t.classDate)+" ("+n(t.startTime)+"~"+n(t.endTime)+") ",1)]),Nt])}),128))]))])])])]),_:1})]),_:1}))}},Rt=te(Ut,[["__scopeId","data-v-cec6bd2d"]]);export{Rt as default};
