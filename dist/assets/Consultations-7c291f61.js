import{r as i,k as V,c as L,w as u,L as N,s as p,o as a,a as m,b as t,d as l,u as f,a8 as S,D as M,C as B,n as v,t as r,K as E,M as F,F as b,S as I,H as c,N as w,I as _,_ as P}from"./index-5fc67d8a.js";import{_ as H}from"./Modal-6eddacb7.js";const $={class:"max-w-7xl mx-auto p-6 space-y-8"},U={class:"bg-gradient-to-r from-orange-50 to-yellow-50 rounded-2xl p-6 shadow-sm"},j={class:"flex justify-between items-center"},R={class:"flex items-center space-x-3"},T={class:"w-8 h-8 text-orange-600",viewBox:"0 0 24 24"},z=["d"],A={class:"w-5 h-5 mr-2",viewBox:"0 0 24 24"},G=["d"],K={class:"space-y-4"},O={class:"p-6 border-b border-gray-100"},Z={class:"flex justify-between items-start"},q={class:"space-y-1"},J={class:"flex items-center space-x-3"},Q={class:"text-lg font-semibold text-gray-800"},W={class:"inline-flex items-center px-3 py-1 bg-blue-100 text-blue-800 text-xs rounded-full"},X={class:"text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full"},Y={class:"p-6 space-y-4"},tt={class:"text-gray-600 text-sm leading-relaxed"},et={key:0,class:"bg-gray-50 rounded-lg p-4 border border-gray-100"},st={class:"text-gray-600 text-sm leading-relaxed"},ot={class:"space-y-2"},nt=["value"],at={class:"space-y-2"},lt={class:"space-y-2"},rt={class:"space-y-2"},dt={class:"flex justify-end space-x-3 pt-4"},pt={__name:"Consultations",setup(it){const d=i(!1),g=i([]),x=i([]),n=i({studentId:"",type:"",content:"",consultationDate:""}),h=o=>({PENDING:"bg-yellow-100 text-yellow-800",IN_PROGRESS:"bg-blue-100 text-blue-800",COMPLETED:"bg-green-100 text-green-800",CANCELLED:"bg-red-100 text-red-800"})[o]||"bg-gray-100 text-gray-800",C=o=>new Date(o).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),k=async()=>{try{await p.post("/api/consultations",n.value),d.value=!1,y()}catch(o){console.error("Failed to create consultation:",o)}},y=async()=>{try{const o=await p.get("/api/consultations");x.value=o.data}catch(o){console.error("Failed to load consultations:",o)}},D=async()=>{try{const o=await p.get("/api/students");g.value=o.data}catch(o){console.error("Failed to load students:",o)}};return V(async()=>{await Promise.all([D(),y()])}),(o,e)=>(a(),L(N,null,{default:u(()=>[m(P,null,{default:u(()=>[t("div",$,[t("div",U,[t("div",j,[t("div",R,[(a(),l("svg",T,[t("path",{fill:"currentColor",d:f(S)},null,8,z)])),e[7]||(e[7]=t("h1",{class:"text-2xl font-bold text-gray-800"},"상담 기록",-1))]),t("button",{onClick:e[0]||(e[0]=s=>d.value=!0),class:"inline-flex items-center px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors duration-150 shadow-sm"},[(a(),l("svg",A,[t("path",{fill:"currentColor",d:f(M)},null,8,G)])),e[8]||(e[8]=B(" 상담 추가 "))])])]),t("div",K,[(a(!0),l(b,null,v(x.value,s=>(a(),l("div",{key:s.id,class:"bg-white rounded-xl shadow-sm overflow-hidden hover:shadow-md transition-shadow duration-200"},[t("div",O,[t("div",Z,[t("div",q,[t("div",J,[t("h3",Q,r(s.student.name),1),t("span",{class:E(["px-3 py-1 text-xs rounded-full font-medium",h(s.status)])},r(s.status),3)]),t("span",W,r(s.type),1)]),t("span",X,r(C(s.consultationDate)),1)])]),t("div",Y,[t("div",null,[t("p",tt,r(s.content),1)]),s.responseContent?(a(),l("div",et,[t("p",st,r(s.responseContent),1)])):F("",!0)])]))),128))]),m(H,{show:d.value,onClose:e[6]||(e[6]=s=>d.value=!1)},{title:u(()=>e[9]||(e[9]=[t("div",{class:"flex items-center space-x-2"},[t("svg",{class:"w-6 h-6 text-orange-600",viewBox:"0 0 24 24"},[t("path",{fill:"currentColor",d:"M20 2H4C2.9 2 2 2.9 2 4V22L6 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2M20 16H5.2L4 17.2V4H20V16Z"})]),t("span",null,"상담 추가")],-1)])),content:u(()=>[t("form",{onSubmit:I(k,["prevent"]),class:"space-y-6"},[t("div",ot,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700"},"학생",-1)),c(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>n.value.studentId=s),class:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors"},[e[10]||(e[10]=t("option",{value:""},"학생을 선택하세요",-1)),(a(!0),l(b,null,v(g.value,s=>(a(),l("option",{key:s.id,value:s.id},r(s.name),9,nt))),128))],512),[[w,n.value.studentId]])]),t("div",at,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700"},"상담 유형",-1)),c(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>n.value.type=s),class:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors"},e[12]||(e[12]=[t("option",{value:""},"상담 유형을 선택하세요",-1),t("option",null,"수업문의",-1),t("option",null,"보강문의",-1),t("option",null,"일정변경",-1),t("option",null,"기타문의",-1)]),512),[[w,n.value.type]])]),t("div",lt,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700"},"내용",-1)),c(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=s=>n.value.content=s),rows:"4",class:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors resize-none",placeholder:"상담 내용을 입력하세요"},null,512),[[_,n.value.content]])]),t("div",rt,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700"},"상담 일시",-1)),c(t("input",{type:"datetime-local","onUpdate:modelValue":e[4]||(e[4]=s=>n.value.consultationDate=s),class:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors"},null,512),[[_,n.value.consultationDate]])]),t("div",dt,[t("button",{type:"button",onClick:e[5]||(e[5]=s=>d.value=!1),class:"px-4 py-2 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors duration-150"}," 취소 "),e[16]||(e[16]=t("button",{type:"submit",class:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors duration-150"}," 저장 ",-1))])],32)]),_:1},8,["show"])])]),_:1})]),_:1}))}};export{pt as default};
