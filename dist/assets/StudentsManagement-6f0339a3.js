import{j as ee,r as d,v as h,P as m,x as P,k as te,s as B,c as se,w as U,L as oe,y as ae,o as a,a as le,b as e,d as l,u as g,Q as ne,H as p,I as V,R as re,M as x,n as w,t as n,S as de,C as I,F as k,T as ie,U as ue,V as ce,K as ge,O as me,N,_ as pe}from"./index-5fc67d8a.js";const xe={class:"flex gap-6"},ve={class:"w-1/3 space-y-4"},ye={class:"bg-white rounded-xl shadow-sm p-4"},fe={class:"flex items-center justify-between mb-6"},_e={class:"flex items-center gap-2"},be={class:"w-6 h-6 text-indigo-600",viewBox:"0 0 24 24"},he=["d"],we={class:"relative flex-1 mx-4"},ke={class:"w-4 h-4",viewBox:"0 0 24 24"},Ce=["d"],Se={class:"space-y-3"},Me=["onClick"],Pe={class:"flex justify-between items-start mb-2"},Be={class:"font-semibold text-gray-900"},Ve=["onClick"],je={class:"text-sm text-gray-600"},Oe={key:0,class:"flex justify-between items-center pt-4 border-t border-gray-200"},De=["disabled"],Te={class:"text-sm text-gray-600"},Le=["disabled"],Ae={class:"flex-1 space-y-6"},Ue={class:"bg-white rounded-xl shadow-sm p-6"},Ie={class:"flex items-center gap-2 mb-6"},Ne={class:"w-6 h-6 text-gray-900",viewBox:"0 0 24 24"},Ye=["d"],$e={key:0,class:"grid grid-cols-2 gap-6"},He={class:"mt-1 font-semibold text-gray-900"},Re={class:"mt-1 text-gray-900"},Fe={class:"mt-1 text-gray-900"},Ee={class:"mt-1 text-gray-900"},Qe={class:"bg-white rounded-xl shadow-sm p-6"},We={class:"flex items-center gap-2 mb-6"},qe={class:"w-6 h-6 text-blue-600",viewBox:"0 0 24 24"},ze=["d"],Ke={key:0},Ge={class:"flex items-center gap-4 mb-6"},Je={class:"flex items-center gap-2"},Xe={class:"flex items-center gap-2"},Ze={class:"overflow-hidden rounded-lg border border-gray-200"},et={class:"min-w-full divide-y divide-gray-200"},tt={class:"bg-white divide-y divide-gray-200"},st={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ot={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},at={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},lt={class:"bg-white rounded-xl shadow-sm p-6"},nt={class:"flex items-center gap-2 mb-6"},rt={class:"w-6 h-6 text-green-600",viewBox:"0 0 24 24"},dt=["d"],it={key:0,class:"space-y-6"},ut={class:"flex justify-between mb-2"},ct={class:"text-sm font-medium text-gray-700"},gt={class:"w-full bg-gray-200 rounded-full h-2.5"},mt={class:"bg-white rounded-xl shadow-sm p-6"},pt={class:"flex items-center gap-2 mb-6"},xt={class:"w-6 h-6 text-purple-600",viewBox:"0 0 24 24"},vt=["d"],yt={class:"flex gap-4 mb-6"},ft={class:"space-y-3"},_t={class:"flex justify-between items-center"},bt={class:"font-semibold text-gray-900"},ht={class:"text-sm text-gray-600"},j=5,wt={__name:"StudentsManagement",setup(kt){const Y={mon:"월요일",tue:"화요일",wed:"수요일",thu:"목요일",fri:"금요일",sat:"토요일",sun:"일요일"},C=d([]),r=d(null),c=d(""),S=d(null),O=ae(),D=h(()=>{if(!c.value)return C.value;const s=c.value.toLowerCase();return C.value.filter(t=>t.name.toLowerCase().includes(s))});function $(s){r.value=s,M(s.id),A(s.id)}function H(s){O.push({name:"studentInfo",params:{id:s}})}function R(){O.push("/forms")}function F(){S.value&&clearTimeout(S.value),S.value=setTimeout(()=>{},300)}function E(){c.value=""}const v=d(m().year()),y=d(m().month()+1),T=d([]);function Q(s){return m(s).format("YYYY-MM-DD")}function W(s){const t=["일","월","화","수","목","금","토"],o=m(s).day();return t[o]+"요일"}function q(s){return s?m(s).format("HH:mm"):"-"}function z(s){return{Python:"bg-blue-500","COS Pro":"bg-green-500",타자연습:"bg-purple-500"}[s]||"bg-gray-500"}async function M(s){if(s)try{const t=await B.get(`/api/attendance/${s}`,{params:{year:v.value,month:y.value}});T.value=t.data}catch(t){console.error(t),alert("학생 출결 데이터 조회 실패")}}const f=d("week"),_=d("asc"),L=d([]);P([f,_],()=>{r.value&&A(r.value.id)}),P([v,y],()=>{r.value&&M(r.value.id)});async function A(s){if(s)try{const t=await B.get("/api/classes/makeup",{params:{range:f.value,order:_.value}});L.value=t.data}catch(t){console.error(t),alert("보강 목록 조회 실패")}}te(()=>{K()});async function K(){try{const s=await B.get("/api/students");C.value=s.data}catch(s){console.error(s),alert("학생 목록 불러오기 실패")}}const u=d(1),G=h(()=>{const s=(u.value-1)*j,t=s+j;return D.value.slice(s,t)}),b=h(()=>Math.ceil(D.value.length/j));function J(){u.value>1&&u.value--}function X(){u.value<b.value&&u.value++}P(c,()=>{u.value=1});const Z=h(()=>r.value?L.value.filter(s=>{var t;return((t=s.student)==null?void 0:t.id)===r.value.id}):[]);return(s,t)=>(a(),se(oe,null,{default:U(()=>[le(pe,null,{default:U(()=>[e("div",xe,[e("div",ve,[e("div",ye,[e("div",fe,[e("div",_e,[(a(),l("svg",be,[e("path",{fill:"currentColor",d:g(ne)},null,8,he)])),t[6]||(t[6]=e("h1",{class:"text-xl font-semibold text-gray-900"},"학생 관리",-1))]),e("div",we,[p(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>c.value=o),placeholder:"학생 이름 검색...",class:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",onInput:F},null,544),[[V,c.value]]),c.value?(a(),l("button",{key:0,onClick:E,class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[(a(),l("svg",ke,[e("path",{fill:"currentColor",d:g(re)},null,8,Ce)]))])):x("",!0)]),e("button",{class:"inline-flex items-center justify-center px-3 py-1 border border-indigo-600 rounded-lg text-indigo-600 hover:bg-indigo-50 transition-colors",onClick:R}," + ")]),e("div",Se,[(a(!0),l(k,null,w(G.value,o=>(a(),l("div",{key:o.id,class:"p-4 bg-white border border-gray-200 rounded-lg hover:border-indigo-500 transition-colors shadow-sm cursor-pointer",onClick:i=>$(o)},[e("div",Pe,[e("div",Be,n(o.name),1),e("button",{class:"px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded hover:bg-gray-200",onClick:de(i=>H(o.id),["stop"])}," 수정 ",8,Ve)]),e("div",je,[I(" ID : "+n(o.id)+" ",1),t[7]||(t[7]=e("br",null,null,-1)),I(" "+n(o.daysOfWeek.map(i=>Y[i]).join(", ")),1)])],8,Me))),128)),b.value>1?(a(),l("div",Oe,[e("button",{class:"px-3 py-1 rounded text-sm text-gray-600 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",disabled:u.value===1,onClick:J}," 이전 ",8,De),e("span",Te,n(u.value)+" / "+n(b.value),1),e("button",{class:"px-3 py-1 rounded text-sm text-gray-600 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",disabled:u.value===b.value,onClick:X}," 다음 ",8,Le)])):x("",!0)])])]),e("div",Ae,[e("div",Ue,[e("div",Ie,[(a(),l("svg",Ne,[e("path",{fill:"currentColor",d:g(ie)},null,8,Ye)])),t[8]||(t[8]=e("h2",{class:"text-xl font-semibold text-gray-900"},"기본 정보",-1))]),r.value?(a(),l("div",$e,[e("div",null,[t[9]||(t[9]=e("label",{class:"text-sm font-medium text-gray-600"},"이름",-1)),e("p",He,n(r.value.name),1)]),e("div",null,[t[10]||(t[10]=e("label",{class:"text-sm font-medium text-gray-600"},"연락처",-1)),e("p",Re,n(r.value.phone),1)]),e("div",null,[t[11]||(t[11]=e("label",{class:"text-sm font-medium text-gray-600"},"보호자 연락처",-1)),e("p",Fe,n(r.value.parent),1)]),e("div",null,[t[12]||(t[12]=e("label",{class:"text-sm font-medium text-gray-600"},"생년월일",-1)),e("p",Ee,n(r.value.birthday),1)])])):x("",!0)]),e("div",Qe,[e("div",We,[(a(),l("svg",qe,[e("path",{fill:"currentColor",d:g(ue)},null,8,ze)])),t[13]||(t[13]=e("h2",{class:"text-xl font-semibold text-gray-900"},"출결 현황",-1))]),r.value?(a(),l("div",Ke,[e("div",Ge,[e("label",Je,[t[14]||(t[14]=e("span",{class:"text-sm font-medium text-gray-600"},"연도:",-1)),p(e("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=o=>v.value=o),class:"px-3 py-1 border border-gray-200 rounded-lg text-sm w-24 focus:ring-2 focus:ring-indigo-500"},null,512),[[V,v.value]])]),e("label",Xe,[t[15]||(t[15]=e("span",{class:"text-sm font-medium text-gray-600"},"월:",-1)),p(e("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=o=>y.value=o),class:"px-3 py-1 border border-gray-200 rounded-lg text-sm w-20 focus:ring-2 focus:ring-indigo-500",min:"1",max:"12"},null,512),[[V,y.value]])]),e("button",{class:"px-4 py-1 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-sm transition-colors",onClick:t[3]||(t[3]=o=>M(r.value.id))}," 조회 ")]),e("div",Ze,[e("table",et,[t[16]||(t[16]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"날짜"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"요일"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"등원시간")])],-1)),e("tbody",tt,[(a(!0),l(k,null,w(T.value,o=>(a(),l("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",st,n(Q(o.date)),1),e("td",ot,n(W(o.date)),1),e("td",at,n(q(o.createdAt)),1)]))),128))])])])])):x("",!0)]),e("div",lt,[e("div",nt,[(a(),l("svg",rt,[e("path",{fill:"currentColor",d:g(ce)},null,8,dt)])),t[17]||(t[17]=e("h2",{class:"text-xl font-semibold text-gray-900"},"학습 현황",-1))]),r.value?(a(),l("div",it,[(a(),l(k,null,w(["Python","COS Pro","타자연습"],(o,i)=>e("div",{key:i},[e("div",ut,[e("span",ct,n(i),1),t[18]||(t[18]=e("span",{class:"text-sm font-medium text-gray-700"},"50%",-1))]),e("div",gt,[e("div",{class:ge(["h-2.5 rounded-full transition-all duration-300",z(i)]),style:{width:"50%"}},null,2)])])),64))])):x("",!0)]),e("div",mt,[e("div",pt,[(a(),l("svg",xt,[e("path",{fill:"currentColor",d:g(me)},null,8,vt)])),t[19]||(t[19]=e("h2",{class:"text-xl font-semibold text-gray-900"},"보강 목록",-1))]),e("div",yt,[p(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>f.value=o),class:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500"},t[20]||(t[20]=[e("option",{value:"week"},"주간",-1),e("option",{value:"month"},"월간",-1)]),512),[[N,f.value]]),p(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>_.value=o),class:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500"},t[21]||(t[21]=[e("option",{value:"asc"},"오름차순",-1),e("option",{value:"desc"},"내림차순",-1)]),512),[[N,_.value]])]),e("div",ft,[(a(!0),l(k,null,w(Z.value,o=>{var i;return a(),l("div",{key:o.id,class:"p-4 bg-gray-50 rounded-lg border border-gray-200"},[e("div",_t,[e("div",null,[e("div",bt,n((i=o.student)==null?void 0:i.name),1),e("div",ht,n(o.classDate)+" ("+n(o.startTime)+"~"+n(o.endTime)+") ",1)]),t[22]||(t[22]=e("span",{class:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-medium"}," 보강 ",-1))])])}),128))])])])])]),_:1})]),_:1}))}},St=ee(wt,[["__scopeId","data-v-6b734a23"]]);export{St as default};
