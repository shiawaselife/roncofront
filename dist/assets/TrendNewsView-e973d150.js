import{v as N,r as m,x as A,n as D,c as R,w as v,_ as S,o as i,a as U,b as t,C as K,L as V,a7 as O,t as d,G as _,d as u,F as b,p as x,H as B,j as F}from"./index-a961658a.js";const L="9af9e3432d304de6b3274ac8e8a9a160",w=N.create({baseURL:"https://newsapi.org/v2",params:{apiKey:L}});class M{async getKoreanTechNews(){try{return(await w.get("/everything",{params:{q:"(IT OR 테크 OR 기술 OR AI OR 인공지능 OR 개발)",language:"ko",sortBy:"publishedAt",pageSize:30,domains:"zdnet.co.kr,etnews.com,bloter.net,aitimes.com,venture.co.kr"}})).data.articles.map(e=>({id:e.url,title:e.title,description:e.description||"내용이 없습니다.",category:{name:this.getCategoryFromTitle(e.title),type:"tech"},timestamp:e.publishedAt,externalUrl:e.url,source:e.source.name,imageUrl:e.urlToImage}))}catch(r){return console.error("Error fetching Korean tech news:",r),[]}}async getNaverNews(){try{return(await N.get("/api/naver/news",{headers:{"X-Naver-Client-Id":{}.VITE_NAVER_CLIENT_ID,"X-Naver-Client-Secret":{}.VITE_NAVER_CLIENT_SECRET},params:{query:"IT OR 테크놀로지 OR 인공지능",sort:"date",display:20}})).data.items.map(e=>({id:e.link,title:e.title.replace(/(<([^>]+)>)/gi,""),description:e.description.replace(/(<([^>]+)>)/gi,""),category:{name:this.getCategoryFromTitle(e.title),type:"tech"},timestamp:new Date(e.pubDate),externalUrl:e.link,source:e.source}))}catch(r){return console.error("Error fetching Naver news:",r),[]}}getCategoryFromTitle(r){const e={AI:["AI","인공지능","머신러닝","딥러닝"],블록체인:["블록체인","암호화폐","비트코인","이더리움"],모바일:["모바일","스마트폰","애플","안드로이드"],개발:["개발","프로그래밍","코딩","소프트웨어"],IT비즈니스:["스타트업","투자","실적","매출"],보안:["보안","해킹","사이버","악성코드"]};for(const[s,c]of Object.entries(e))if(c.some(l=>r.includes(l)))return s;return"IT/기술"}async getAllNews(){try{const[r,e]=await Promise.all([this.getKoreanTechNews(),this.getNaverNews()]),s=[...r,...e];return Array.from(new Map(s.map(l=>[l.id,l])).values()).sort((l,h)=>new Date(h.timestamp)-new Date(l.timestamp))}catch(r){throw console.error("Error fetching all news:",r),r}}async searchNews(r){try{return(await w.get("/everything",{params:{q:r,language:"ko",sortBy:"publishedAt",pageSize:20,domains:"zdnet.co.kr,etnews.com,bloter.net,aitimes.com,venture.co.kr"}})).data.articles.map(s=>({id:s.url,title:s.title,description:s.description||"내용이 없습니다.",category:{name:this.getCategoryFromTitle(s.title),type:"tech"},timestamp:s.publishedAt,externalUrl:s.url,source:s.source.name,imageUrl:s.urlToImage}))}catch(e){throw console.error("Error searching news:",e),e}}}const k=new M,$={class:"min-h-screen bg-gray-50 p-4"},q={class:"bg-white rounded-lg shadow p-6"},z={class:"flex justify-between items-center mb-6"},j=t("h2",{class:"text-xl font-semibold"},"트렌드/뉴스",-1),H={class:"flex items-center gap-4"},P={class:"relative"},X=["onKeyup"],G=t("i",{class:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"},null,-1),W={class:"text-gray-500"},Y=["disabled"],J={key:0,class:"flex justify-center items-center py-10"},Q=t("div",{class:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"},null,-1),Z=[Q],ee={key:1,class:"text-center py-10"},te={class:"text-red-500"},se={key:2,class:"space-y-6"},ae={class:"flex items-center gap-3 mb-3 flex-wrap"},re={class:"text-gray-500 text-sm"},oe={class:"text-lg font-medium mb-2 flex items-center gap-2"},ne=["href"],le=t("i",{class:"fas fa-external-link-alt text-gray-400 text-sm ml-2"},null,-1),ie={class:"text-gray-600 leading-relaxed mb-3"},ce={class:"flex items-center gap-3"},de=["onClick"],ue=t("i",{class:"fas fa-bookmark"},null,-1),pe=[ue],he=["onClick"],ge=t("i",{class:"fas fa-share-alt"},null,-1),me=[ge],fe={__name:"TrendNewsView",setup(T){const r=m([]),e=m(!1),s=m(null),c=m(""),l=A(()=>new Date().toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})),h=a=>{const n=new Date,o=new Date(a),p=Math.abs(n-o),g=Math.floor(p/(1e3*60*60));return g<1?"방금 전":g<24?`${g}시간 전`:`${Math.floor(g/24)}일 전`},y=async()=>{e.value=!0,s.value=null;try{const a=await k.getAllNews();r.value=a.map(n=>({...n,time:h(n.timestamp),tags:[n.source],bookmarked:!1}))}catch(a){s.value="뉴스를 불러오는데 실패했습니다",console.error(a)}finally{e.value=!1}},C=async()=>{if(!c.value.trim())return y();e.value=!0,s.value=null;try{const a=await k.searchNews(c.value);r.value=a.map(n=>({...n,time:h(n.timestamp),tags:[n.source],bookmarked:!1}))}catch(a){s.value="검색에 실패했습니다",console.error(a)}finally{e.value=!1}},I=a=>{a.bookmarked=!a.bookmarked},E=async a=>{try{navigator.share?await navigator.share({title:a.title,text:a.description,url:a.externalUrl}):(await navigator.clipboard.writeText(a.externalUrl),alert("링크가 클립보드에 복사되었습니다."))}catch(n){console.error("Error sharing news:",n)}},f=()=>{y()};return D(()=>{y()}),(a,n)=>(i(),R(S,null,{default:v(()=>[U(F,null,{default:v(()=>[t("div",$,[t("div",q,[t("div",z,[j,t("div",H,[t("div",P,[K(t("input",{"onUpdate:modelValue":n[0]||(n[0]=o=>c.value=o),type:"text",placeholder:"뉴스 검색...",class:"pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyup:O(C,["enter"])},null,40,X),[[V,c.value]]),G]),t("span",W,d(l.value)+" 업데이트",1),t("button",{class:"text-gray-500 hover:text-gray-700 disabled:opacity-50",onClick:f,disabled:e.value},[t("i",{class:_(["fas fa-sync",{"animate-spin":e.value}])},null,2)],8,Y)])]),e.value?(i(),u("div",J,Z)):s.value?(i(),u("div",ee,[t("p",te,d(s.value),1),t("button",{onClick:f,class:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"}," 다시 시도 ")])):(i(),u("div",se,[(i(!0),u(b,null,x(r.value,o=>(i(),u("div",{key:o.id,class:"border-b border-gray-100 last:border-0 pb-6 last:pb-0"},[t("div",ae,[t("span",{class:_(["px-3 py-1 rounded-full text-sm",o.category.type==="tech"?"bg-blue-100 text-blue-700":"",o.category.type==="science"?"bg-green-100 text-green-700":"",o.category.type==="education"?"bg-purple-100 text-purple-700":""])},d(o.category.name),3),(i(!0),u(b,null,x(o.tags,p=>(i(),u("span",{key:p,class:"bg-gray-100 text-gray-600 px-3 py-1 rounded-full text-sm"},d(p),1))),128)),t("span",re,d(o.time),1)]),t("h3",oe,[t("a",{href:o.externalUrl,target:"_blank",class:"hover:text-blue-600"},[B(d(o.title)+" ",1),le],8,ne)]),t("p",ie,d(o.description),1),t("div",ce,[t("button",{onClick:p=>I(o),class:_(["text-gray-400 hover:text-gray-600 transition",o.bookmarked?"text-yellow-400 hover:text-yellow-500":""])},pe,10,de),t("button",{onClick:p=>E(o),class:"text-gray-400 hover:text-gray-600 transition"},me,8,he)])]))),128))]))])])]),_:1})]),_:1}))}};export{fe as default};
