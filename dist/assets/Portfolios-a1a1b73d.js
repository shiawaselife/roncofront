import{r as d,n as F,o as r,c as M,w as c,a as x,b as t,d as n,u,aU as v,D as g,p as y,t as a,aV as P,aW as T,L as $,F as b,R as H,I as p,M as w,O as k,j as U,_ as I,x as _}from"./index-00074ae5.js";import{_ as L}from"./Modal-2f2e290b.js";const S={class:"max-w-7xl mx-auto p-6 space-y-8"},A={class:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl p-6 shadow-sm"},N={class:"flex justify-between items-center"},O=t("div",{class:"flex items-center space-x-3"},[t("svg",{class:"w-8 h-8 text-purple-600",viewBox:"0 0 24 24"},[t("path",{fill:"currentColor",d:"M20,6H12L10,4H4A2,2 0 0,0 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8A2,2 0 0,0 20,6M20,18H4V8H20V18Z"})]),t("h1",{class:"text-2xl font-bold text-gray-800"},"포트폴리오")],-1),E={class:"w-5 h-5 mr-2",viewBox:"0 0 24 24"},R=["d"],Z={class:"grid gap-6 md:grid-cols-2 lg:grid-cols-3"},z={class:"p-6 border-b border-gray-100"},K={class:"flex justify-between"},W={class:"text-lg font-semibold text-gray-800"},X={class:"text-sm text-gray-600 mt-1"},q={class:"flex items-start space-x-3"},G={class:"text-sm text-gray-500"},J=["onClick"],Q={class:"w-5 h-5",viewBox:"0 0 24 24"},Y=["d"],tt={class:"p-6"},et={class:"text-gray-600 text-sm leading-relaxed"},st={class:"mt-4 flex items-center justify-between"},ot={class:"px-3 py-1 bg-purple-100 text-purple-800 text-xs rounded-full font-medium"},lt=["href"],rt={class:"w-4 h-4 mr-1",viewBox:"0 0 24 24"},nt=["d"],at={class:"flex items-center space-x-2"},it={class:"w-6 h-6 text-purple-600",viewBox:"0 0 24 24"},dt=["d"],ct=t("span",null,"포트폴리오 업로드",-1),ut=["onSubmit"],pt={class:"space-y-2"},_t=t("label",{class:"block text-sm font-medium text-gray-700"},"학생",-1),ht=t("option",{value:""},"학생을 선택하세요",-1),ft=["value"],mt={class:"space-y-2"},xt=t("label",{class:"block text-sm font-medium text-gray-700"},"제목",-1),vt={class:"space-y-2"},gt=t("label",{class:"block text-sm font-medium text-gray-700"},"프로젝트 유형",-1),yt=t("option",{value:""},"프로젝트 유형을 선택하세요",-1),bt=t("option",null,"Arduino",-1),wt=t("option",null,"Python",-1),kt=t("option",null,"C언어",-1),Ct=t("option",null,"웹개발",-1),Dt=[yt,bt,wt,kt,Ct],jt={class:"space-y-2"},Vt=t("label",{class:"block text-sm font-medium text-gray-700"},"설명",-1),Bt={class:"space-y-2"},Ft=t("label",{class:"block text-sm font-medium text-gray-700"},"파일",-1),Mt={class:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg"},Pt={class:"space-y-1 text-center"},Tt=t("svg",{class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48"},[t("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),$t={class:"flex text-sm text-gray-600"},Ht={class:"relative cursor-pointer bg-white rounded-md font-medium text-purple-600 hover:text-purple-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-purple-500"},Ut=t("span",null,"파일 업로드",-1),It=t("p",{class:"pl-1"},"또는 드래그 앤 드롭",-1),Lt=t("p",{class:"text-xs text-gray-500"},"ZIP, PDF, DOC, DOCX 최대 10MB",-1),St={class:"flex justify-end space-x-3 pt-4"},At=t("button",{type:"submit",class:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors duration-150"}," 업로드 ",-1),Zt={__name:"Portfolios",setup(Nt){const i=d(!1),f=d([]),m=d([]),l=d({studentId:"",title:"",projectType:"",description:"",file:null}),C=s=>new Date(s).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"}),D=s=>{l.value.file=s.target.files[0]},j=async()=>{try{const s=new FormData;Object.keys(l.value).forEach(o=>{s.append(o,l.value[o])}),await _.post("/api/portfolios",s,{headers:{"Content-Type":"multipart/form-data"}}),i.value=!1,h(),l.value={studentId:"",title:"",projectType:"",description:"",file:null}}catch(s){console.error("Failed to create portfolio:",s)}},V=async s=>{if(confirm("정말로 이 포트폴리오를 삭제하시겠습니까?"))try{await _.delete(`/api/portfolios/${s}`),h()}catch(o){console.error("Failed to delete portfolio:",o)}},h=async()=>{try{const s=await _.get("/api/portfolios");m.value=s.data}catch(s){console.error("Failed to load portfolios:",s)}},B=async()=>{try{const s=await _.get("/api/students");f.value=s.data}catch(s){console.error("Failed to load students:",s)}};return F(async()=>{try{await Promise.all([B(),h()])}catch(s){console.error("Failed to load initial data:",s)}}),(s,o)=>(r(),M(I,null,{default:c(()=>[x(U,null,{default:c(()=>[t("div",S,[t("div",A,[t("div",N,[O,t("button",{onClick:o[0]||(o[0]=e=>i.value=!0),class:"inline-flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors duration-150 shadow-sm"},[(r(),n("svg",E,[t("path",{fill:"currentColor",d:u(v)},null,8,R)])),g(" 포트폴리오 업로드 ")])])]),t("div",Z,[(r(!0),n(b,null,y(m.value,e=>(r(),n("div",{key:e.id,class:"bg-white rounded-xl shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden"},[t("div",z,[t("div",K,[t("div",null,[t("h3",W,a(e.title),1),t("p",X,a(e.student.name),1)]),t("div",q,[t("span",G,a(C(e.createdDate)),1),t("button",{onClick:Ot=>V(e.id),class:"text-gray-400 hover:text-red-500 transition-colors"},[(r(),n("svg",Q,[t("path",{fill:"currentColor",d:u(P)},null,8,Y)]))],8,J)])])]),t("div",tt,[t("p",et,a(e.description),1),t("div",st,[t("span",ot,a(e.projectType),1),e.filePath?(r(),n("a",{key:0,href:"/api/portfolios/"+e.id+"/file",target:"_blank",class:"inline-flex items-center px-3 py-1 text-sm text-blue-600 hover:text-blue-700 transition-colors"},[(r(),n("svg",rt,[t("path",{fill:"currentColor",d:u(T)},null,8,nt)])),g(" 파일 다운로드 ")],8,lt)):$("",!0)])])]))),128))]),x(L,{show:i.value,onClose:o[6]||(o[6]=e=>i.value=!1)},{title:c(()=>[t("div",at,[(r(),n("svg",it,[t("path",{fill:"currentColor",d:u(v)},null,8,dt)])),ct])]),content:c(()=>[t("form",{onSubmit:H(j,["prevent"]),class:"space-y-6"},[t("div",pt,[_t,p(t("select",{"onUpdate:modelValue":o[1]||(o[1]=e=>l.value.studentId=e),class:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors"},[ht,(r(!0),n(b,null,y(f.value,e=>(r(),n("option",{key:e.id,value:e.id},a(e.name),9,ft))),128))],512),[[w,l.value.studentId]])]),t("div",mt,[xt,p(t("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>l.value.title=e),type:"text",class:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors",placeholder:"프로젝트 제목을 입력하세요"},null,512),[[k,l.value.title]])]),t("div",vt,[gt,p(t("select",{"onUpdate:modelValue":o[3]||(o[3]=e=>l.value.projectType=e),class:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors"},Dt,512),[[w,l.value.projectType]])]),t("div",jt,[Vt,p(t("textarea",{"onUpdate:modelValue":o[4]||(o[4]=e=>l.value.description=e),rows:"4",class:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors resize-none",placeholder:"프로젝트에 대한 설명을 입력하세요"},null,512),[[k,l.value.description]])]),t("div",Bt,[Ft,t("div",Mt,[t("div",Pt,[Tt,t("div",$t,[t("label",Ht,[Ut,t("input",{type:"file",onChange:D,class:"sr-only"},null,32)]),It]),Lt])])]),t("div",St,[t("button",{type:"button",onClick:o[5]||(o[5]=e=>i.value=!1),class:"px-4 py-2 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors duration-150"}," 취소 "),At])],40,ut)]),_:1},8,["show"])])]),_:1})]),_:1}))}};export{Zt as default};
